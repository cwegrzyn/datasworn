id: starforged
ruleset: starforged
source:
  title: 'Ironsworn: Starforged Rulebook'
  license: https://creativecommons.org/licenses/by/4.0
  url: https://ironswornrpg.com
  date: 2022-05-06
  authors:
    - name: Shawn Tomkin
assets:
  command_vehicle:
    _source:
      page: 55
    name: Command Vehicle Assets
    color: '#9aa3ad'
    summary: This is your interstellar spacecraft.
    description: |-
      The **command vehicle** is your interstellar STARSHIP. It is a default asset for your character, taken when you begin your campaign. If you are playing with others, this is a shared asset; each of you may use the STARSHIP's abilities while aboard the craft.

      The command vehicle has an integrity meter and starts at 5 integrity. When your STARSHIP takes a hit, make the [Withstand Damage](id:starforged/moves/suffer/withstand_damage) move to see what happens.
    contents:
      starship:
        name: Starship
        asset_type: Command Vehicle
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        attachments:
          assets:
            - '*/assets/module/*'
        options:
          name: &TextField.Name
            field_type: text
            label: Name
        condition_meter:
          label: integrity
          min: 0
          value: 5
          max: 5
          moves: &Vehicle.Moves
            suffer: starforged/moves/suffer/withstand_damage
            recover: starforged/moves/recover/repair
          controls:
            battered: &Vehicle.Battered
              label: battered
              field_type: checkbox
              is_impact: true
            cursed:
              label: cursed
              field_type: checkbox
              is_impact: true
        abilities:
          - text: |-
              Your armed, multipurpose starship is suited for interstellar and atmospheric flight. It can comfortably transport several people, has space for cargo, and can carry and launch support vehicles. When you [Advance](id:starforged/moves/legacy/advance), you may spend experience to equip this vehicle with module assets.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/legacy/advance
                text: You may spend experience to equip this vehicle with module assets.
                move_type: no_roll
          - text: |-
              When you [Finish an Expedition](id:starforged/moves/exploration/finish_an_expedition) (dangerous or greater) in your starship and score a hit, this journey strengthened your ties to your ship and any fellow travelers. You and your allies may mark 1 tick on your bonds legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/exploration/finish_an_expedition
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: In your starship (dangerous or greater)
                outcomes:
                  strong_hit: &Starship.2
                    text: This journey strengthened your ties to your ship and any fellow travelers. You and your allies may mark 1 tick on your bonds legacy track.
                  weak_hit: *Starship.2
          - text: |-
              When you [Withstand Damage](id:starforged/moves/suffer/withstand_damage), you may roll +heart. If you do, [Endure Stress](id:starforged/moves/suffer/endure_stress) (-1) on a weak hit or miss.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/withstand_damage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To your Starship
                      method: any
                      roll_options:
                        - using: heart
                outcomes:
                  weak_hit: &Starship.3
                    text: '[Endure Stress](id:starforged/moves/suffer/endure_stress) (-1).'
                  miss: *Starship.3
  module:
    _source:
      page: 55
    name: Module Assets
    color: '#7f5a90'
    # Summary: Enhanced features or capabilities of your STARSHIP. As with the ship itself, these are shared assets; a module’s abilities can benefit other player characters if it’s reasonable for them to make use of it.
    description: |-
      **Modules** are linked to your STARSHIP and offer additional options and advantages when aboard that vehicle.

      These assets are earned and managed by a single character. They can be shared with allies, but only if it's practical for them to make use of it (not everyone may know how to use a RESEARCH LAB).

      When you [Withstand Damage](id:starforged/moves/suffer/withstand_damage) and score a miss, you can mark a module as broken to offset further danger for your STARSHIP. Flip the card over to indicate its broken state. A broken module cannot be used until you successfully [Repair](id:starforged/moves/recover/repair) it.
    contents:
      engine_upgrade:
        asset_type: Module
        name: Engine Upgrade
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: &Module.Broken
            label: broken
            field_type: card_flip
            disables_asset: true
        abilities:
          - text: |-
              Your vehicle’s finely-tuned engines speed your travels. When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) (+edge) and score a strong hit, take +1 momentum; on a strong hit with a 6 on your action die, take +2 momentum instead of +1.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your vehicle
                      roll_options:
                        - using: edge
                outcomes:
                  strong_hit:
                    text: Take +1 momentum; if you get a 6 on your action die, take +2 momentum instead of +1.
                    # TODO: action die value flag?
          - text: |-
              When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray), choose one (before rolling).

                * Maneuver: Add +1 and take +1 momentum on a strong hit.
                * Boost: Take +2 momentum on a hit.
            augment_moves:
              # TODO: split this trigger
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your vehicle (and you choose to maneuver)
                text: Add +1.
                outcomes:
                  strong_hit: &outcome:+1_momentum
                    text: Take +1 momentum.
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your vehicle (and you choose to boost)
                outcomes: &outcomes:+2_momentum.HIT
                  strong_hit: &outcome:+2_momentum
                    text: Take +2 momentum.
                  weak_hit: *outcome:+2_momentum
          - text: |-
              When you make a desperate move to pursue a foe, escape a threat, or get in range, you may push your engines to their limit. If you do (decide after rolling), reroll any dice and count a weak hit as a strong hit. Then, [Withstand Damage](id:starforged/moves/suffer/withstand_damage) (-2).
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a desperate move to pursue a foe, escape a threat, or get in range (in your vehicle)
                outcomes:
                  strong_hit: &Engine_Upgrade.2
                    text: You may push your engines to their limit. If you do (decide after rolling), reroll any dice and count a weak hit as a strong hit. Then, [Withstand Damage](id:starforged/moves/suffer/withstand_damage) (-2).
                  weak_hit: *Engine_Upgrade.2
                  miss: *Engine_Upgrade.2
      expanded_hold:
        asset_type: Module
        name: Expanded Hold
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        condition_meter:
          label: cargo
          max: 3
          value: 0
          min: 0

        # TODO: key for being interchangeable with supply?
        # states:
        #   - *Broken
        abilities:
          - # TODO: when you gain [condition meter] trigger?
            # alternately: could happen with some kind of tag system?
            # the suffer trigger is fairly easy to hit, i guess
            text: |-
              Your vehicle carries up to 3 cargo. When you gain +supply, you may convert it to +cargo. When you make a move +supply, you may add +cargo. When you [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources), you may instead suffer -cargo for any portion of the cost.
            enabled: true
          - text: |-
              When you score a miss or weak hit as you make a move to barter or negotiate, and you have at least 1 cargo, you may sweeten the pot. If you do, reroll all dice and add +cargo. Then, suffer -1 cargo.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: You make a move to barter or negotiate, and you have at least 1 cargo
                outcomes:
                  weak_hit: &Expanded_Hold.2
                    reroll:
                      text: You may sweeten the pot. If you do, reroll all dice and add +cargo. Then, suffer -1 cargo.
                      method: all
                  miss: *Expanded_Hold.2
          - text: |-
              When you make a move to outrun a threat and have at least 1 cargo, you may first lighten your load by dropping cargo. If you do, suffer -cargo by the amount dropped, add +that amount, and take +2 momentum on a hit.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a move to outrun a threat and have at least 1 cargo
                text: |-
                  You may first lighten your load by dropping cargo. If you do, suffer -cargo by the amount dropped, add +that amount, and take +2 momentum on a hit.
                outcomes: *outcomes:+2_momentum.HIT
      grappler:
        asset_type: Module
        name: Grappler
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: &move:Asset.Grappler |-
              Your grappler can disrupt systems and snare machines and vehicles with a magnetic tether. When you take a minute or so to ready the grappler, roll +integrity or +wits. On a strong hit, the grappler is charged and may be fired. On a weak hit, charging requires extra time or focus; [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1). On a miss, charging fails and you must [Withstand Damage](id:starforged/moves/suffer/withstand_damage) (-2). If you make a move to attack a foe or overcome an obstacle by firing the grappler, take an automatic strong hit.
            enabled: true
            moves:
              ready_grappler:
                name: Ready Grappler
                move_type: action_roll
                trigger:
                  text: When you take a minute or so to ready the grappler...
                  conditions:
                    - method: highest
                      roll_options:
                        - using: wits
                        - using: attached_asset_meter
                text: *move:Asset.Grappler
                outcomes:
                  strong_hit:
                    text: |-
                      The grappler is charged and may be fired.

                      If you make a move to attack a foe or overcome an obstacle by firing the grappler, take an automatic strong hit.
                  weak_hit:
                    text: |-
                      The grappler is charged and may be fired, but charging requires extra time or focus; [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1).

                      If you make a move to attack a foe or overcome an obstacle by firing the grappler, take an automatic strong hit.
                  miss:
                    text: |-
                      Charging fails and you must [Withstand Damage](id:starforged/moves/suffer/withstand_damage) (-2).
          - text: |-
              If you score a strong hit when readying the grappler, you may [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1) to overcharge the module. When you fire an overcharged grappler, take +2 momentum; if in a fight, also mark progress.
            augment_moves:
              - augments:
                  - starforged/assets/module/grappler/abilities/0/moves/ready_grappler
                outcomes:
                  strong_hit:
                    text: |-
                      You may [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1) to overcharge the module. When you fire an overcharged grappler, take +2 momentum; if in a fight, also mark progress.
          - text: |-
              When you [Take Decisive Action](id:starforged/moves/combat/take_decisive_action) by firing the grappler, you may reroll one challenge die.
            augment_moves:
              - augments:
                  - starforged/moves/combat/take_decisive_action
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: By firing the grappler
                outcomes:
                  strong_hit: &Grappler.3
                    text: You may reroll one challenge die.
                  weak_hit: *Grappler.3
                  miss: *Grappler.3
      heavy_cannons:
        asset_type: Module
        name: Heavy Cannons
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: |-
              When you aim your cannons and use them to [Strike](id:starforged/moves/combat/strike), choose one.

                * Strafing run: Add +1 and take +1 momentum on a hit.
                * Focus fire: Mark progress on a hit, but [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1).
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/combat/strike
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you aim your cannons and use them to [Strike](id:starforged/moves/combat/strike)
                text: |-
                  Choose one.

                    * Strafing run: Add +1 and take +1 momentum on a hit.
                    * Focus fire: Mark progress on a hit, but [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1).
          - text: |-
              Once per fight, when you [Clash](id:starforged/moves/combat/clash) by committing to an all-or-nothing exchange of fire, add +1, count a weak hit as a strong hit, and mark progress on a hit. On a miss, you must suffer a dire outcome.
            augment_moves:
              - augments:
                  - starforged/moves/combat/clash
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Once per fight, when you [Clash](id:starforged/moves/combat/clash) by committing to an all-or-nothing exchange of fire
                text: Add +1, count a weak hit as a strong hit, and mark progress on a hit. On a miss, you must suffer a dire outcome.
                outcomes:
                  strong_hit:
                    text: Mark progress.
                  weak_hit:
                    text: Count a weak hit as a strong hit.
                    count_as: strong_hit
                  miss:
                    text: You must suffer a dire outcome.
          - text: |-
              When you [Compel](id:starforged/moves/adventure/compel), [Enter the Fray](id:starforged/moves/combat/enter_the_fray), or [Gain Ground](id:starforged/moves/combat/gain_ground) by bringing your cannons to bear and sending a promise of violence to your foe over communication channels, add +1 and take +1 momentum on a hit. On a strong hit with a match, take another +1 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/compel
                  - starforged/moves/combat/enter_the_fray
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By bringing your cannons to bear and sending a promise of violence to your foe over communication channels
                text: Add +1 and take +1 momentum on a hit. On a strong hit with a match, take another +1 momentum.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match: *outcome:+2_momentum
      internal_refit:
        asset_type: Module
        name: Internal Refit
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: |-
              You have customized the cabins, common spaces, and environment of the ship to your needs. When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) (dangerous or greater), reroll any dice for the first leg of your journey. On a hit, you and your allies may envision how you make yourself at home; if you do, take +2 momentum or +1 spirit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                move_type: action_roll
                trigger:
                  conditions:
                    - text: On the first leg of your journey (dangerous or greater)
                outcomes:
                  strong_hit: &Internal_Refit.1
                    text: You and your allies may envision how you make yourself at home; if you do, take +2 momentum or +1 spirit.
                  weak_hit: *Internal_Refit.1
          - text: &move:Asset.Internalrefit |-
              Your vessel is stocked with reserves. When you [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) and your supply is reduced to 0, first roll +integrity instead of marking unprepared. On a strong hit, take +1 supply. Otherwise, mark unprepared.
            moves:
              draw_reserves:
                name: Draw Reserves
                move_type: action_roll
                trigger:
                  text: When you [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) and your supply is reduced to 0...
                  conditions:
                    - method: any
                      roll_options:
                        - using: attached_asset_meter
                text: *move:Asset.Internalrefit
                outcomes:
                  strong_hit:
                    text: You don't need to mark unprepared. Take +1 supply.
                  weak_hit: &Draw_Reserves.Outcome
                    text: Mark unprepared as normal.
                  miss: *Draw_Reserves.Outcome
          - text: |-
              When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) to oppose an invader within your vessel, reroll any dice. On a strong hit, take +momentum equal to integrity. On a strong hit with a match, also mark progress.
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To oppose an invader within your vessel
                outcomes:
                  strong_hit:
                    text: Take +momentum equal to your vessel's integrity.
                    reroll: &reroll:any
                      method: any
                      text: Reroll any dice.
                    match:
                      text: Mark progress, and take +momentum equal to your vessel's integrity.
                  weak_hit: &outcome:reroll_any
                    reroll: *reroll:any
                  miss: *outcome:reroll_any
      medbay:
        asset_type: Module
        name: Medbay
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: |-
              When you use your medbay to [Heal](id:starforged/moves/recover/heal) yourself or another patient, you may reroll your action die if its value is less than your vehicle's integrity.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/recover/heal
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you use your medbay to [Heal](id:starforged/moves/recover/heal) yourself or another patient
                outcomes:
                  strong_hit: &Medbay.1
                    reroll: &reroll:action_die<integrity
                      method: action_die
                      text: You may reroll your action die if its value is less than your vehicle's integrity.
                  weak_hit: *Medbay.1
                  miss: *Medbay.1
          - text: |-
              When you or an ally mark the permanently harmed impact and are brought to the medbay without delay (less than an hour or so), you have a shot at making things right. If you [Heal](id:starforged/moves/recover/heal) and score a strong hit, clear the impact (in addition to the other benefits of the move). Then, envision the scar that now serves as a reminder of the incident.
            augment_moves:
              - augments:
                  - starforged/moves/recover/heal
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you or an ally mark the permanently harmed impact and are brought to the medbay without delay (less than an hour or so)
                      by:
                        player: true
                        ally: true
                outcomes:
                  strong_hit:
                    text: Clear the impact (in addition to the other benefits of the move). Then, envision the scar that now serves as a reminder of the incident.
          - text: |-
              When you [Face Danger](id:starforged/moves/adventure/face_danger) by performing a risky medical procedure, or if you [Gather Information](id:starforged/moves/adventure/gather_information) through an autopsy or medical examination, reroll any dice and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By performing a risky medical procedure
                outcomes: &Medbay.3
                  strong_hit: &Medbay.3.Hit
                    text: Reroll any dice and take +1 momentum.
                    reroll: *reroll:any
                  weak_hit: *Medbay.3.Hit
                  miss: *outcome:reroll_any
              - augments:
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Through an autopsy or medical examination
                outcomes: *Medbay.3
      missile_array:
        asset_type: Module
        name: Missile Array
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        condition_meter:
          label: ammo
          max: 5
          value: 5
          min: 0
        controls:
          broken: *Module.Broken
        # states:
        #   - *Broken
        abilities:
          - text: |-
              Your missile array is armed with 5 ammo. When you [Strike](id:starforged/moves/combat/strike) or [Clash](id:starforged/moves/combat/clash) with a missile attack, suffer -1 ammo and mark progress on a hit. If you [Resupply](id:starforged/moves/recover/resupply) in a place where your missiles can be replenished, you may exchange any earned +supply for +ammo.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/combat/strike
                  - starforged/moves/combat/clash
                move_type: action_roll
                trigger:
                  conditions:
                    - text: With a missile attack
                text: Suffer -1 ammo.
                outcomes:
                  strong_hit: &Missile_Array.1
                    text: Mark progress.
                  weak_hit: *Missile_Array.1
              - augments:
                  - starforged/moves/recover/resupply
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In a place where your missiles can be replenished
                outcomes:
                  strong_hit: &Missile_Array.1.1
                    text: You may exchange any earned +supply for +ammo.
                  weak_hit: *Missile_Array.1.1
          - text: |-
              When you have at least 1 ammo and [Gain Ground](id:starforged/moves/combat/gain_ground) by locking a missile on target, add +1 and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By locking a missile on target
                text: Add +1.
                outcomes: &outcomes:+1_momentum.HIT
                  strong_hit: *outcome:+1_momentum
                  weak_hit: *outcome:+1_momentum
          - text: |-
              When you have at least 3 ammo and [Take Decisive Action](id:starforged/moves/combat/take_decisive_action) by unleashing all of your missiles, roll an action die before making the progress roll. If your action die is equal to or less than ammo, you may reroll any challenge dice. Then, set ammo to 0.
            augment_moves:
              - augments:
                  - starforged/moves/combat/take_decisive_action
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: When you have at least 3 ammo and [Take Decisive Action](id:starforged/moves/combat/take_decisive_action) by unleashing all of your missiles
                text: Roll an action die before making the progress roll. If your action die is equal to or less than ammo, you may reroll any challenge dice. Then, set ammo to 0.
      overseer:
        asset_type: Module
        name: Overseer
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        options:
          name: *TextField.Name
        abilities:
          - text: |-
              Your AI module keeps watch over the vehicle's systems and sensor data. When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) or [Gain Ground](id:starforged/moves/combat/gain_ground) by talking through a situation with the overseer, you may roll +integrity. If you do, take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By talking through a situation with the overseer AI
                      method: any
                      roll_options:
                        - using: attached_asset_meter
                outcomes: *outcomes:+1_momentum.HIT
            enabled: true
          - text: |-
              When you [Withstand Damage](id:starforged/moves/suffer/withstand_damage) and roll on the miss table, the overseer will do what it can to help. Roll twice on the table and choose either result.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/withstand_damage
                outcomes:
                  miss: # only relevant for a Miss, since that's the only place a table comes up
                    text: If you roll on the miss table, the overseer will do what it can to help. Roll twice on the table and choose either result.
          - text: |-
              The overseer can pilot the vehicle independently. When you [Face Danger](id:starforged/moves/adventure/face_danger) by handing over control to the AI in an emergency, or to summon the vehicle remotely within a hazardous situation, you may roll +integrity. If you do, take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By handing over control to the AI in an emergency, or to summon the vehicle remotely within a hazardous situation
                      method: any
                      roll_options:
                        - using: attached_asset_meter
                outcomes: *outcomes:+1_momentum.HIT
      reinforced_hull:
        asset_type: Module
        name: Reinforced Hull
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: |-
              Your vehicle is clad in iron. When you [Withstand Damage](id:starforged/moves/suffer/withstand_damage), add +1. On a strong hit, take +1 momentum.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/suffer/withstand_damage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To your vehicle with a Reinforced Hull
                text: Add +1.
                outcomes:
                  strong_hit: *outcome:+1_momentum
          - text: |-
              Your reinforced hull is given a fierce and distinctive color or design. When you arrive at a place where your reputation is a factor, take +1 momentum. When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) against a foe who knows your reputation, take +momentum equal to your vehicle’s integrity on a strong hit.
            # Triggers: # TODO: implement generic trigger/event interface
            #   - event:
            #       text: When you arrive at a place (in your vehicle) where your reputation is a factor
            #     outcome:
            #       text: Take +1 momentum
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Against a foe who knows your reputation
                outcomes:
                  strong_hit:
                    text: Take +momentum equal to your vehicle’s integrity.
          - text: |-
              When you [React Under Fire](id:starforged/moves/combat/react_under_fire) by letting your reinforced hull take the hit, add +1 and take +1 momentum on a hit. On a strong hit with a match, take another +1 momentum as you surge through the chaos and put yourself in perfect position. On a miss, [Pay the Price](id:starforged/moves/fate/pay_the_price) by marking this module as broken.
            augment_moves:
              - augments:
                  - starforged/moves/combat/react_under_fire
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By letting your reinforced hull take the hit
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: Take +2 momentum as you surge through the chaos and put yourself in perfect position.
                  weak_hit: *outcome:+1_momentum
                  miss:
                    text: '[Pay the Price](id:starforged/moves/fate/pay_the_price) by marking this component as broken.'
      research_lab:
        asset_type: Module
        name: Research Lab
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: |-
              When you use your lab to [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) or [Gather Information](id:starforged/moves/adventure/gather_information) through careful analysis or experimentation, add +1 and take +1 momentum on a hit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Through careful analysis or experimentation (in your research lab)
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you [Face Danger](id:starforged/moves/adventure/face_danger) to isolate or secure a hazardous specimen, reroll any dice.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To isolate or secure a hazardous specimen
                outcomes: &outcomes:reroll_any.ALL
                  strong_hit: *outcome:reroll_any
                  weak_hit: *outcome:reroll_any
                  miss: *outcome:reroll_any
          - text: |-
              When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) to undertake a long-term research project (extreme or greater), reroll any dice. When you obtain crucial samples, equipment, or data, mark progress on the quest and take +2 momentum. When you devote extended time to the project in your lab, [Face Danger](id:starforged/moves/adventure/face_danger) and add +1. On a hit, mark progress. On a strong hit with a match, mark progress twice. When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) and score a hit, also mark one box on your discoveries legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To undertake a long-term research project (extreme or greater)
                text: When you obtain crucial samples, equipment, or data, mark progress on the quest and take +2 momentum.
                # TODO: append to outcomes?
                outcomes: *outcomes:reroll_any.ALL
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you devote extended time to the long-term research project (extreme or greater) in your lab
                text: Add +1.
                outcomes: &outcomes:mark_progress.HIT_twice_on_match
                  strong_hit:
                    text: Mark progress.
                    match:
                      text: Mark progress twice.
                  weak_hit: &outcome:mark_progress
                    text: Mark progress.
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: To undertake a long-term research project (extreme or greater)
                outcomes:
                  strong_hit: &outcome:mark_discoveries_box
                    text: Mark one extra box on your discoveries legacy track.
                  weak_hit: *outcome:mark_discoveries_box
      sensor_array:
        asset_type: Module
        name: Sensor Array
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: |-
              Your advanced sensors scan the paths ahead to help spot dangers. When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) (+wits), you may reroll one challenge die.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your vehicle
                      roll_options:
                        - using: wits
                outcomes: &outcomes:reroll_challenge_die_all
                  strong_hit: &outcome:reroll_challenge_die
                    reroll:
                      method: challenge_die
                      text: You may reroll one challenge die.
                  weak_hit: *outcome:reroll_challenge_die
                  miss: *outcome:reroll_challenge_die
          - text: |-
              When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) or [Gather Information](id:starforged/moves/adventure/gather_information) by scanning your vehicle's surroundings or analyzing a nearby object, choose one and take +1 momentum on a hit.

                * Manual scan: Add +1
                * Automated scan: Instead of rolling the action die, make it the value of your vehicle's integrity
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By scanning your vehicle's surroundings or analyzing a nearby object (and choosing a manual scan)
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
              - augments:
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By scanning your vehicle's surroundings or analyzing a nearby object (and choosing an automated scan)
                # Set dice:
                #   - dice: action_die_todo_add_to_interface_revise_object_similar_to_reroll
                #     text: Instead of rolling the action die, make it the value of your vehicle's integrity.
                #     # ref to stat?
                text: |-
                  Instead of rolling the action die, make it the value of your vehicle's integrity.
                outcomes: *outcomes:+1_momentum.HIT

          - text: |-
              When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) against an ambush, or [Face Danger](id:starforged/moves/adventure/face_danger) to detect a hidden threat, you may roll +integrity. If you do, reroll any dice and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Against an ambush
                      method: any
                      roll_options:
                        - using: attached_asset_meter
                outcomes: &Sensor_Array.3
                  strong_hit: &Sensor_Array.3.Hit
                    text: Take +1 momentum.
                    reroll: *reroll:any
                  weak_hit: *Sensor_Array.3.Hit
                  miss: *outcome:reroll_any
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To detect a hidden threat
                      method: any
                      roll_options:
                        - using: attached_asset_meter
                outcomes: *Sensor_Array.3
      shields:
        asset_type: Module
        name: Shields
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: &move:Asset.Shields |-
              When you raise your shields, roll +your vehicle's integrity or +wits. On a strong hit, set your shields to 4. On a weak hit, make them 3. On a miss, make them 2 but [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1). Then, if you [Withstand Damage](id:starforged/moves/suffer/withstand_damage), ignore damage up to the value of your shields and suffer -1 shields. Raised shields last for a few minutes. If reduced to 0, they cannot be raised again for an hour or so.
            enabled: true
            moves:
              raise_shields:
                name: Raise Shields
                move_type: action_roll
                trigger:
                  text: When you raise your shields...
                  conditions:
                    - method: any
                      roll_options:
                        - using: wits
                        - using: attached_asset_meter
                text: *move:Asset.Shields
                outcomes:
                  strong_hit:
                    text: |-
                      Set your vehicle's shields to 4.

                      Then, if you [Withstand Damage](id:starforged/moves/suffer/withstand_damage), ignore damage up to the value of your shields and suffer -1 shields. Raised shields last for a few minutes. If reduced to 0, they cannot be raised again for an hour or so.
                  weak_hit:
                    text: |-
                      Set your vehicle's shields to 3.

                      Then, if you [Withstand Damage](id:starforged/moves/suffer/withstand_damage), ignore damage up to the value of your shields and suffer -1 shields. Raised shields last for a few minutes. If reduced to 0, they cannot be raised again for an hour or so.
                  miss:
                    text: |-
                      Set your vehicle's shields to 2, but [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1).

                      Then, if you [Withstand Damage](id:starforged/moves/suffer/withstand_damage), ignore damage up to the value of your shields and suffer -1 shields. Raised shields last for a few minutes. If reduced to 0, they cannot be raised again for an hour or so.
          - text: |-
              You may [React Under Fire](id:starforged/moves/combat/react_under_fire) by letting your shields take the blow. If you do, roll +shields and take +2 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/combat/react_under_fire
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By letting your shields take the blow
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/module/shields/condition_meter
                outcomes: *outcomes:+2_momentum.HIT
          - text: |-
              When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) and score a strong hit, you may raise your shields to 3 without rolling. If you do, take +1 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your vehicle
                outcomes:
                  strong_hit:
                    text: You may raise your shields to 3 without rolling. If you do, take +1 momentum.
        condition_meter:
          label: shields
          max: 4
          value: 0
          min: 0
      stealth_tech:
        asset_type: Module
        name: Stealth Tech
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: |-
              Your vehicle is rigged for silent running. When you make a move against a specific foe or threat to avoid detection, add +1. If you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) by ambushing an unaware foe, add +1 and mark progress on a strong hit.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a move against a specific foe or threat to avoid detection (in your vehicle)
                text: Add +1.
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By ambushing an unaware foe (in your vehicle)
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Mark progress.
          - text: |-
              When you travel stealthily as you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) (+shadow), you may reroll your action die.
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you travel stealthily (in your vehicle)
                      roll_options:
                        - using: shadow
                outcomes: &reroll_action_die_all
                  strong_hit: &outcome:reroll_action_die
                    reroll:
                      method: action_die
                  weak_hit: *outcome:reroll_action_die
                  miss: *outcome:reroll_action_die
          - text: |-
              When you are poised to [Strike](id:starforged/moves/combat/strike) from hiding, you may roll +shadow. If you do, choose one (before rolling).

                * Strike true: Reroll any dice.
                * Strike hard: Mark progress on a hit.

              On a strong hit with a match, you also remain totally undetected; take +2 momentum and add +1 on your next [Strike](id:starforged/moves/combat/strike).
            augment_moves:
              - augments:
                  - starforged/moves/combat/strike
                move_type: action_roll
                trigger:
                  conditions:
                    - text: You are poised to [Strike](id:starforged/moves/combat/strike) from hiding (and choose to strike true)
                      method: any
                      roll_options:
                        - using: shadow
                outcomes:
                  strong_hit:
                    reroll: *reroll:any
                    match:
                      text: You also remain totally undetected; take +2 momentum and add +1 on your next [Strike](id:starforged/moves/combat/strike).
                  weak_hit: *outcome:reroll_any
                  miss: *outcome:reroll_any
              - augments:
                  - starforged/moves/combat/strike
                move_type: action_roll
                trigger:
                  conditions:
                    - text: You are poised to [Strike](id:starforged/moves/combat/strike) from hiding (and choose to strike hard)
                      method: any
                      roll_options:
                        - using: shadow
                outcomes:
                  strong_hit:
                    text: Mark progress.
                    match:
                      text: Mark progress. You also remain totally undetected; take +2 momentum and add +1 on your next [Strike](id:starforged/moves/combat/strike).
                  weak_hit: *outcome:mark_progress
      vehicle_bay:
        asset_type: Module
        name: Vehicle Bay
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: |-
              You may purchase or upgrade a support vehicle for 1 less experience. When you [Repair](id:starforged/moves/recover/repair) a battered support vehicle, spend 1 repair point (instead of 2).
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/recover/repair
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you [Repair](id:starforged/moves/recover/repair) a battered support vehicle
                outcomes:
                  strong_hit: &Vehicle_Bay.1
                    text: Spend 1 repair point (instead of 2) to remove the support vehicle's battered impact.
                  weak_hit: *Vehicle_Bay.1
          - text: &Vehicle_Bay.2 |-
              When a support vehicle is destroyed, and you are able to retrieve its wreckage, you may [Ask the Oracle](id:starforged/moves/fate/ask_the_oracle) using the yes/no table if something can be salvaged from the mess. Make it 50/50. On a yes, spend 1 experience to restore the support vehicle asset with all previously marked abilities. Until you [Repair](id:starforged/moves/recover/repair) and bring it back to full working order, the vehicle is battered with 0 integrity.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/withstand_damage
                outcomes:
                  miss:
                    text: *Vehicle_Bay.2
          - text: |-
              When you make a move to launch from or land on your command vehicle in a perilous situation or environment, reroll any dice and take +1 momentum on a hit.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a move to launch from or land on your command vehicle in a perilous situation or environment
                outcomes:
                  strong_hit: &Vehicle_Bay.3.Hit
                    text: Take +1 momentum.
                    reroll: *reroll:any
                  weak_hit: *Vehicle_Bay.3.Hit
                  miss: *outcome:reroll_any
      workshop:
        asset_type: Module
        name: Workshop
        shared: true
        _source:
          title: 'Ironsworn: Starforged Assets'
        controls:
          broken: *Module.Broken
        abilities:
          - text: |-
              When you [Repair](id:starforged/moves/recover/repair) in the field, add +1.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/recover/repair
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In the field (with your workshop)
                text: Add +1.
          - text: |-
              When you make a move in your workshop to craft, modify, deactivate, or disassemble a device or machine, you may reroll your action die if its value is less than your vehicle's integrity.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a move in your workshop to craft, modify, deactivate, or disassemble a device or machine
                outcomes:
                  strong_hit: &Workshop.2
                    reroll: *reroll:action_die<integrity
                  weak_hit: *Workshop.2
                  miss: *Workshop.2
          - text: |-
              When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) to undertake a long-term engineering project (extreme or greater), reroll any dice. When you obtain a crucial part or resource, mark progress on the quest and take +2 momentum. When you devote extended time to the project in your workshop, [Face Danger](id:starforged/moves/adventure/face_danger) and add +1. On a hit, mark progress. On a strong hit with a match, mark progress twice. When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) and score a hit, mark one extra box on your quests legacy track.
            # TODO: consider a way to explicitly structure marked quests?
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: &Workshop.Vow To undertake a long-term engineering project (extreme or greater)
                outcomes:
                  strong_hit: &Workshop.3
                    text: |-
                      When you obtain a crucial part or resource, mark progress on the quest and take +2 momentum.
                    reroll: *reroll:any
                  weak_hit: *Workshop.3
                  miss: *Workshop.3
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you devote extended time to your long-term engineering project (extreme or greater) in your workshop
                text: Add +1.
                outcomes: *outcomes:mark_progress.HIT_twice_on_match
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: *Workshop.Vow
                outcomes:
                  strong_hit: &Workshop.3.FYV
                    text: Mark one extra box on your quests legacy track.
                  weak_hit: *Workshop.3.FYV
  support_vehicle:
    _source:
      page: 56
    name: Support Vehicle Assets
    color: '#495790'
    # Summary: Secondary vehicles that your starship can carry and launch. If you are playing with others, these are a shared asset with abilities available to any character aboard that vehicle. The person who selects a support vehicle might typically serve as the pilot or manage the asset.
    description: |-
      **Support vehicles** complement your command vehicle for planetside or short-range operations. If you are playing with others, one of you might serve as the pilot or owner of a support vehicle, but anyone on board can use its abilities as appropriate to the situation.

      As with the command vehicle, your support vehicles have integrity meters. The maximum integrity varies based on the type of vehicle. When a support vehicle faces a damaging situation or environment, you must [Withstand Damage](id:starforged/moves/suffer/withstand_damage) to see how it fares.
    contents:
      exosuit:
        name: Exosuit
        shared: true
        asset_type: Support Vehicle
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          name: *TextField.Name
        condition_meter:
          label: integrity
          max: 6
          min: 0
          value: 6
          controls: &SupportVehicle.Controls
            battered: *Vehicle.Battered
          moves: *Vehicle.Moves
        abilities:
          - text: |-
              Your lumbering rig houses one pilot, is sealed against hostile environments, and is armed with fixed or held weapons. When you make a forceful, damaging, or resistant move, you may (after rolling) replace the value of your action die with the rig's integrity; if you do, [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1).
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a forceful, damaging, or resistant move in your Exosuit
                outcomes:
                  strong_hit: &Exosuit.1
                    text: You may (after rolling) replace the value of your action die with the rig's integrity; if you do, [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1).
                  weak_hit: *Exosuit.1
                  miss: *Exosuit.1
          - text: |-
              Your exosuit is equipped with thrusters. You can maneuver in zero-g, make thrust-assisted leaps, and drop to a surface from altitude. When you burn fuel to overcome a critical obstacle (decide after rolling), you may reroll any dice. If you do, [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1).
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: You use your Exosuit's thrusters to maneuver in zero-g, make thrust-assisted leaps, or drop to a surface from altitude
                outcomes:
                  strong_hit: &Exosuit.2
                    text: When you burn fuel to overcome a critical obstacle (decide after rolling), you may reroll any dice. If you do, [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1).
                    reroll: *reroll:any
                  weak_hit: *Exosuit.2
                  miss: *Exosuit.2
          - text: |-
              When you [Withstand Damage](id:starforged/moves/suffer/withstand_damage), you may reroll one challenge die.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/withstand_damage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To your Exosuit
                outcomes: *outcomes:reroll_challenge_die_all
      hoverbike:
        name: Hoverbike
        shared: true
        asset_type: Support Vehicle
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          name: *TextField.Name
        condition_meter:
          label: integrity
          max: 3
          min: 0
          value: 3
          controls: *SupportVehicle.Controls
          moves: *Vehicle.Moves
        abilities:
          - text: |-
              Your unarmed hoverbike provides speedy planetside ground transport, and is equipped to carry up to two people and their gear. When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) (+edge), take +1 momentum on a hit. On a strong hit with a match, you also surge ahead or find a new path; mark progress.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                move_type: action_roll
                trigger:
                  conditions:
                    - text: On your hoverbike
                      roll_options:
                        - using: edge
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: You surge ahead or find a new path. Take +1 momentum and mark progress.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              When you fire the bike's afterburner and make a move to perform a risky maneuver, you may add +integrity and take +2 momentum on a strong hit. If you do, count a weak hit as a miss.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you fire your hoverbike's afterburner and make a move to perform a risky maneuver
                text: You may add +integrity.
                outcomes:
                  strong_hit:
                    text: Take +2 momentum.
                  weak_hit:
                    count_as: miss
          - text: |-
              When you make a move while maneuvering your bike and burn momentum to improve your result, roll your action die. On a 5 or 6, do not reset momentum.
            # augment_player:
            #   momentum:
            #     burn:
            #       - trigger:
            #           text: When you make a move while maneuvering your bike # implicit: 'and burn momentum to improve your result'
            #         effect:
            #           text: Roll your action die. On a 5 or 6, do not reset momentum.
            # FIXME: this is a difficult trigger to describe in relation to moves. it might make more sense to develop a momentum burn trigger instead.
      rover:
        name: Rover
        shared: true
        asset_type: Support Vehicle
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          name:
            label: Name
            field_type: text
        condition_meter:
          label: integrity
          max: 5
          min: 0
          value: 5
          controls: *SupportVehicle.Controls
          moves: *Vehicle.Moves
        abilities:
          - text: |-
              Your unarmed rover provides protected planetside transport. When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) or [Set a Course](id:starforged/moves/exploration/set_a_course), add +1. When you [Finish an Expedition](id:starforged/moves/exploration/finish_an_expedition) in your rover, you may reroll one challenge die.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                  - starforged/moves/exploration/set_a_course
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your rover
                text: Add +1.
              - augments:
                  - starforged/moves/exploration/finish_an_expedition
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your rover
                outcomes: *outcomes:reroll_challenge_die_all
          - text: |-
              You may equip your rover with one module asset at no extra cost. When you [Withstand Damage](id:starforged/moves/suffer/withstand_damage), the module can be broken or destroyed as with a command vehicle. If you reconfigure your rover, spend 1 experience, discard the module, and equip another with the same number of marked abilities.
            augment_asset:
              attachments:
                max: 1
                assets:
                  - '*/assets/modules/*'
          - text: |-
              When you [Face Danger](id:starforged/moves/adventure/face_danger) or [React Under Fire](id:starforged/moves/combat/react_under_fire) by taking a hit or crashing through an obstacle, you may roll +integrity. If you do, take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                  - starforged/moves/combat/react_under_fire
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By taking a hit or crashing through an obstacle
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/support_vehicle/rover/condition_meter
                outcomes: *outcomes:+1_momentum.HIT
      service_pod:
        name: Service Pod
        shared: true
        asset_type: Support Vehicle
        _source:
          title: 'Ironsworn: Starforged Assets'

        options:
          name: *TextField.Name
        condition_meter:
          label: integrity
          max: 4
          min: 0
          value: 4
          controls: *SupportVehicle.Controls
          moves: *Vehicle.Moves
        abilities:
          - text: |-
              Your unarmed utility vehicle houses one pilot for short-range, low gravity operations. When you make a move using the pod’s manipulator arms to perform a delicate or forceful task, add +1 and take +1 momentum on a hit.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a move using the pod’s manipulator arms to perform a delicate or forceful task
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you [Face Danger](id:starforged/moves/adventure/face_danger), [Gain Ground](id:starforged/moves/combat/gain_ground), or [React Under Fire](id:starforged/moves/combat/react_under_fire) by maneuvering your pod through a hazardous or obstructed area, choose an approach and roll +integrity.

                * Careful: Add +2 and [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1)
                * Reckless: Take +1 momentum on a hit
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                  - starforged/moves/combat/gain_ground
                  - starforged/moves/combat/react_under_fire
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By maneuvering your pod through a hazardous or obstructed area
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/support_vehicle/service_pod/condition_meter
                text: |-
                  Choose an approach and roll +integrity.

                    * Careful: Add +2 and [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1)
                    * Reckless: Take +1 momentum on a hit
          - text: |-
              When you make a move while controlling the pod and push its capabilities to the limit, you may take an automatic strong hit. If you do, [Withstand Damage](id:starforged/moves/suffer/withstand_damage) (-2).
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a move while controlling the pod and push its capabilities to the limit
                text: You may take an automatic strong hit. If you do, [Withstand Damage](id:starforged/moves/suffer/withstand_damage) (-2).

      shuttle:
        name: Shuttle
        shared: true
        asset_type: Support Vehicle
        _source:
          title: 'Ironsworn: Starforged Assets'

        options:
          name: *TextField.Name
        condition_meter:
          label: integrity
          max: 4
          min: 0
          value: 4
          controls: *SupportVehicle.Controls
          moves: *Vehicle.Moves
        abilities:
          - text: |-
              Your unarmed shuttle provides short-range transport for several people and equipment through space or atmosphere. When you travel to a location (not your command vehicle), you and your allies may take +1 momentum when you arrive
            enabled: true
            # FIXME: non-move trigger
          - text: |-
              When you [Face Danger](id:starforged/moves/adventure/face_danger) or [React Under Fire](id:starforged/moves/combat/react_under_fire) to navigate through hazardous skies, avoid obstacles, or evade an attack, add +1 and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                  - starforged/moves/combat/react_under_fire
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To navigate through hazardous skies, avoid obstacles, or evade an attack
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              Your shuttle is sealed against high pressure environments, can travel underwater, and is more resistant to damage; when you [Withstand Damage](id:starforged/moves/suffer/withstand_damage), add +1.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/withstand_damage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To your shuttle
                text: Add +1.
      skiff:
        name: Skiff
        shared: true
        asset_type: Support Vehicle
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          name: *TextField.Name
        condition_meter:
          label: integrity
          max: 4
          min: 0
          value: 4
          controls: *SupportVehicle.Controls
          moves: *Vehicle.Moves
        abilities:
          - text: |-
              Your unarmed flatbed hover-vehicle carries several people, gear, and cargo over land or water. When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) or [Set a Course](id:starforged/moves/exploration/set_a_course), you may rely on the skiff's simple durability and roll +integrity. If you do, take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                  - starforged/moves/exploration/set_a_course
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Rely on the skiff's simple durability
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/support_vehicle/skiff/condition_meter
                outcomes: *outcomes:+1_momentum.HIT
            enabled: true
          - text: |-
              Your skiff is armed with a turreted cannon. When you [Strike](id:starforged/moves/combat/strike) or [Clash](id:starforged/moves/combat/clash) by firing the cannon, roll +integrity and take +1 momentum on a hit. On a strong hit with a match, your shots cause extra destruction or create havoc; mark progress.
            augment_moves:
              - augments:
                  - starforged/moves/combat/strike
                  - starforged/moves/combat/clash
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By firing the skiff's cannon
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/support_vehicle/skiff/condition_meter
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: Your shots cause extra destruction or create havoc; mark progress, and take +1 momentum.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              Your skiff is fully stocked. When you [Check Your Gear](id:starforged/moves/adventure/check_your_gear), add +1 and take +1 momentum on a hit.
      snub_fighter:
        name: Snub Fighter
        shared: true
        asset_type: Support Vehicle
        _source:
          title: 'Ironsworn: Starforged Assets'

        options:
          name: *TextField.Name
        condition_meter:
          label: integrity
          max: 4
          min: 0
          value: 4
          controls: *SupportVehicle.Controls
          moves: *Vehicle.Moves
        abilities:
          - text: |-
              Your armed snub fighter carries a single pilot for space or atmospheric flight and combat. When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray), you may roll +integrity; if you do, take +2 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your snub fighter
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/support_vehicle/snub_fighter/condition_meter
                outcomes: *outcomes:+2_momentum.HIT
            enabled: true
          - text: |-
              When you [Strike](id:starforged/moves/combat/strike) or [Clash](id:starforged/moves/combat/clash), add +1. On a strong hit with a match, mark progress.
            augment_moves:
              - augments:
                  - starforged/moves/combat/strike
                  - starforged/moves/combat/clash
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your snub fighter
                text: Add +1.
                outcomes:
                  strong_hit:
                    match: *outcome:mark_progress
          - text: |-
              When you personally defeat a notable foe in your snub fighter, envision the victory mark you make on the fuselage. Tally your victories in this box. For every five, mark 2 ticks on your quests legacy track.
            controls:
              victory_marks:
                label: Victory marks
                field_type: counter
                min: 0
                value: 0
  path:
    _source:
      page: 56
    name: Path Assets
    color: '#3f7faa'
    # Summary: Background aspects, careers, interests, training, and skills.
    description: |-
      **Paths** are your background, interests, training, skills, powers, and key equipment. They provide mechanical and narrative advantages, but also reflect who you are and how you interact with the world. When you create your character in the next chapter, you'll select at least two paths to get started.

      Some paths represent your skill with a signature weapon style or piece of equipment. If you see a requirement at the top of the asset card, such as “If you wield a bladed weapon…,” the asset is only usable when taking action using that item.
    contents:
      ace:
        asset_type: Path
        name: Ace
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Face Danger](id:starforged/moves/adventure/face_danger) or [React Under Fire](id:starforged/moves/combat/react_under_fire) by guiding your vehicle through a hazard or out of harm’s way, add +1 and take +1 momentum on a hit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                  - starforged/moves/combat/react_under_fire
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By guiding your vehicle through a hazard or out of harm’s way
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you [Gain Ground](id:starforged/moves/combat/gain_ground) by maneuvering your vehicle against a foe, add +1. If you score a strong hit with a 4, 5, or 6 on the action die, you may put yourself in firing position. If you do, set aside the action die or note its value. If you or an ally [Strike](id:starforged/moves/combat/strike) using the vehicle’s weapons, preset your action die with that value. This persists until you fail to score a strong hit on that move, or until you make another move which changes your vehicle’s position.
            augment_moves:
              - augments:
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By maneuvering your vehicle against a foe
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: If you score a strong hit with a 4, 5, or 6 on the action die, you may put yourself in firing position. If you do, set aside the action die or note its value. If you or an ally [Strike](id:starforged/moves/combat/strike) using the vehicle’s weapons, preset your action die with that value. This persists until you fail to score a strong hit on that move, or until you make another move which changes your vehicle’s position.
          - text: |-
              When you must [Endure Stress](id:starforged/moves/suffer/endure_stress) while piloting a vehicle, you may roll +integrity. If you do, take +1 momentum on a strong hit.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/endure_stress
                move_type: action_roll
                trigger:
                  conditions:
                    - text: While piloting a vehicle
                      method: any
                      roll_options:
                        - using: ref
                          ref: '*/assets/*/*/condition_meter'
                outcomes:
                  strong_hit: *outcome:+1_momentum
      archer:
        asset_type: Path
        name: Archer
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: If you wield a power bow...
        condition_meter:
          label: ammo
          max: 6
          min: 0
          value: 6

        abilities:
          - text: &move:Asset.Archer |-
              You carry 6 ammo. When you [Strike](id:starforged/moves/combat/strike) or [Clash](id:starforged/moves/combat/clash), you may add +1 or +2 and suffer that amount as -ammo. To replenish your ammo by crafting projectiles, roll +wits. On a strong hit, take up to +6 ammo. On a weak hit, take up to +4 ammo and [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1). On a miss, [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1).
            moves:
              craft_projectiles:
                name: Craft Projectiles
                move_type: action_roll
                trigger:
                  text: When you replenish your ammo by crafting projectiles...
                  conditions:
                    - method: any
                      roll_options:
                        - using: wits
                text: *move:Asset.Archer
                outcomes:
                  strong_hit:
                    text: |-
                      Take up to +6 ammo.
                  weak_hit:
                    text: |-
                      Take up to +4 ammo and [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1).
                  miss:
                    text: |-
                      [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1).

            enabled: true
          - text: |-
              You may [Enter the Fray](id:starforged/moves/combat/enter_the_fray) by unleashing a volley of bow shots. If you do, roll +ammo and suffer -1 ammo. On a hit, mark progress.
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/path/archer/condition_meter
                      text: By unleashing a volley of bow shots
                outcomes:
                  strong_hit: &Archer.2
                    text: Suffer -1 ammo, and mark progress.
                  weak_hit: *Archer.2
                  miss:
                    text: Suffer -1 ammo.
          - text: |-
              When you load a specialized projectile such as a zip line, explosive, or electromagnetic disrupter, suffer -1 ammo. If you then take your shot by making a move, you may preset your action die to 5. On a hit, envision the effects and take +1 momentum.
            augment_moves:
              - # Cost:
                #   - resource: ${{@ASSET_METER}}
                #     value: 1 # TODO: value should probably be an array of valid values
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Using a specialized projectile such as a zip line, explosive, or electromagnetic disrupter
                # TODO: preset action die
                # Preset:
                #   - die: Action die
                #     to: 5
                text: When you load a specialized projectile such as a zip line, explosive, or electromagnetic disrupter, suffer -1 ammo. If you then take your shot by making a move, you may preset your action die to 5.
                outcomes:
                  strong_hit: &Archer.3
                    text: Envision the effects of the projectile and take +1 momentum.
                  weak_hit: *Archer.3
      armored:
        asset_type: Path
        name: Armored
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: If you wear your finely crafted set of personal armor...
        abilities:
          - text: |-
              When you [Face Danger](id:starforged/moves/adventure/face_danger), [React Under Fire](id:starforged/moves/combat/react_under_fire), or [Clash](id:starforged/moves/combat/clash) against physical attacks or impact, you may put trust in your armor’s strength. If you do, preset your action die to 4. On a strong hit with a match, take +2 momentum as you build confidence, make an impression on your foes, or improve your position.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                  - starforged/moves/combat/react_under_fire
                  - starforged/moves/combat/clash
                move_type: action_roll
                trigger:
                  conditions:
                    - text: While putting trust in your armor’s strength against physical attacks or impact
                text: You may put trust in your armor’s strength. If you do, preset your action die to 4.
                outcomes:
                  strong_hit:
                    match:
                      text: Take +2 momentum as you build confidence, make an impression on your foes, or improve your position.
                # Preset:
                #   - die: Action die
                #     value: 4
                # TODO: revisit once i figure out what's happening with presets
          - text: |-
              You add an important new piece to your set of armor, or upgrade its materials. As above, but preset your action die to 5 instead of 4.
            # TODO: alter trigger above, by ID?
            # augment_abilities:
            #   - augments:
            #       - starforged/assets/path/armored/abilities/0
            #     augment_moves:
            #       - text: You may put trust in your armor’s strength. If you do, preset your action die to 5.
          - text: |-
              When you must [Endure Harm](id:starforged/moves/suffer/endure_harm), you may instead let your armor take the hit. If you do, roll your action die. On a 4 or greater, ignore the harm. On a 1-3, ignore the harm but your armor is now broken; you must [Repair](id:starforged/moves/recover/repair) and spend 5 repair points to bring it back to working condition.
            # alter:
            # properties:
            # states:
            #   - *Broken
            augment_moves:
              - augments:
                  - starforged/moves/suffer/endure_harm
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By letting your armor take the hit
              # TODO: something to handle arbitrary rolls like this
      artist:
        asset_type: Path
        name: Artist
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you make a move to craft an artistic work, present an artistic gift or performance, or leave your artistic mark on an item or location, you may reroll your action die if its value is less than your spirit. On a strong hit, take +1 momentum or +1 spirit.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a move to craft an artistic work, present an artistic gift or performance, or leave your artistic mark on an item or location
                outcomes:
                  strong_hit:
                    text: Take +1 momentum or +1 spirit.
                    reroll: &reroll:action_die<spirit
                      text: You may reroll your action die if its value is less than your spirit.
                      method: action_die
                  weak_hit:
                    reroll: *reroll:action_die<spirit
                  miss:
                    reroll: *reroll:action_die<spirit
          - text: |-
              When you [Gather Information](id:starforged/moves/adventure/gather_information) or [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) by studying the aesthetics of a being or culture, add +2.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/gather_information
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By studying the aesthetics of a being or culture
                text: Add +2.
          - text: &move:Asset.Artist |-
              When you create or perform a significant artistic work as a public memorial or tribute, roll +the stat which best represents the work’s nature. On a strong hit, the work will stand the test of time; mark 2 ticks on your bonds legacy track. On a weak hit, its impact is short-lived; mark 1 tick instead of 2. On a miss, the work is ignored, misunderstood, or co-opted, and you must [Pay the Price](id:starforged/moves/fate/pay_the_price).
            moves:
              commemorate:
                name: Commemorate
                move_type: action_roll
                trigger:
                  text: When you create or perform a significant artistic work as a public memorial or tribute...
                  conditions:
                    - method: any
                      text: Roll +the stat which best represents the work’s nature
                      roll_options:
                        - using: edge
                        - using: heart
                        - using: iron
                        - using: shadow
                        - using: wits
                text: *move:Asset.Artist
                outcomes:
                  strong_hit:
                    text: |-
                      The work will stand the test of time; mark 2 ticks on your bonds legacy track.
                  weak_hit:
                    text: |-
                      The work's impact is short-lived; mark 1 tick on your bonds legacy track.
                  miss:
                    text: |-
                      The work is ignored, misunderstood, or co-opted, and you must [Pay the Price](id:starforged/moves/fate/pay_the_price).
      augmented:
        asset_type: Path
        name: Augmented
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          one:
            label: One
            field_type: text
          two:
            label: Two
            field_type: text
        # states: # TODO: attach to specific abilities? hmm.
        #   - name: broken (augment 1)
        #     enabled: false
        #     disables_asset: false
        #     impact: false
        #     permanent: false
        abilities:
          - text: |-
              You are equipped with an advanced prosthetic, implant, or mechanical enhancement. When you make a move directly aided by the augment, envision how it gives you exceptional capabilities and add +1. On a strong hit with a match, your augment exceeds expectations; take +2 momentum. On a miss with a match, the augment is broken; you must [Repair](id:starforged/moves/recover/repair) and spend 3 repair points to bring it back to working condition.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a move directly aided by your augment
                text: Envision how your augment gives you exceptional capabilities and add +1.
                outcomes:
                  strong_hit:
                    match:
                      text: Your augment exceeds expectations; take +2 momentum.
                  miss:
                    match:
                      text: Your augment is broken; you must [Repair](id:starforged/moves/recover/repair) and spend 3 repair points to bring it back to working condition.
          - text: |-
              You are equipped with a second augment. It functions as above, but the benefits of the two augments do not stack.
            # alter:
            # properties:
            #   states:
            #     # TODO: adjust/annotate AlterProperties interface to clarify that array items should be concatenated
            #     - name: broken (augment 2)
            #       enabled: false
            #       disables_asset: false
            #       impact: false
            #       permanent: false
          - text: |-
              When you must [Endure Harm](id:starforged/moves/suffer/endure_harm) or [Face Death](id:starforged/moves/threshold/face_death), you may instead mark an augment as broken. [Repair](id:starforged/moves/recover/repair) it as detailed above.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/endure_harm
                  - starforged/moves/threshold/face_death
                text: You may instead mark an augment as broken. [Repair](id:starforged/moves/recover/repair) it as detailed in the augmented asset.
      bannersworn:
        asset_type: Path
        name: Bannersworn
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          ideology:
            label: Ideology
            field_type: text
        abilities:
          - text: |-
              You are bound to a clan, faction, or creed. When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) in service to this ideology, reroll any dice. On a hit, mark 1 tick on your bonds legacy track.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In service to your bound clan, faction, or creed
                    # TODO: some kind of string templating, like "In service to ${{ideology}}"
                outcomes:
                  strong_hit:
                    text: Mark 1 tick on your bonds legacy track.
                    reroll: *reroll:any
                  weak_hit:
                    text: Mark 1 tick on your bonds legacy track.
                    reroll: *reroll:any
                  miss: *outcome:reroll_any
          - text: |-
              When you or an ally [Sojourn](id:starforged/moves/recover/sojourn) and score a strong hit with a match, you may envision meeting someone of the same ideology. If you [Make a Connection](id:starforged/moves/connection/make_a_connection) with them and score a hit, mark 1 tick on your bonds legacy track. When you [Forge a Bond](id:starforged/moves/connection/forge_a_bond) with anyone of your ideology, make the legacy reward one rank higher (1 extra box if already epic).
            augment_moves:
              - augments:
                  - starforged/moves/recover/sojourn
                # TODO: flag for things that apply to Ally moves
                move_type: action_roll
                trigger:
                  conditions:
                    - by:
                        player: true
                        ally: true
                outcomes:
                  strong_hit:
                    match:
                      text: You may envision meeting someone of the same ideology. If you [Make a Connection](id:starforged/moves/connection/make_a_connection) with them and score a hit, mark 1 tick on your bonds legacy track.
                # TODO: consider including the make a connection bit? or is that too conditional to bother with?
              - augments:
                  - starforged/moves/connection/forge_a_bond
                move_type: action_roll
                trigger:
                  conditions:
                    - text: With anyone of your ideology
                outcomes:
                  strong_hit:
                    text: Make the legacy reward one rank higher (1 extra box if already epic).
                  weak_hit:
                    text: Make the legacy reward one rank higher (1 extra box if already epic).
          - text: |-
              When you make a progress move in direct service to your ideology, you may reroll one challenge die. If you score a strong hit with a match, your reputation grows among those who share your ideology; mark 1 tick on your bonds legacy track.
            augment_moves:
              - move_type: progress_roll
                trigger:
                  conditions:
                    - text: When you make a progress move in direct service to your ideology
                outcomes:
                  strong_hit:
                    reroll: &reroll:challenge_die
                      method: challenge_die
                      text: You may reroll one challenge die.
                    match:
                      text: Your reputation grows among those who share your ideology; mark 1 tick on your bonds legacy track.
                  weak_hit: &outcome:reroll_challenge_die
                    reroll: *reroll:challenge_die
                  miss: *outcome:reroll_challenge_die
      blademaster:
        asset_type: Path
        name: Blademaster
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: If you wield a bladed weapon...
        abilities:
          - text: |-
              When you [Clash](id:starforged/moves/combat/clash) or [Strike](id:starforged/moves/combat/strike) in close quarters, add +1. On a strong hit with a match, you are unstoppable; mark progress.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/combat/clash
                  - starforged/moves/combat/strike
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you wield a bladed weapon in close quarters
                outcomes:
                  strong_hit:
                    match:
                      text: You are unstoppable; mark progress.
          - text: |-
              If you [Gain Ground](id:starforged/moves/combat/gain_ground) by moving into close quarters against your foe, choose your approach.

                * Charge: Roll +heart, and mark progress on a hit.
                * Evade: Roll +edge, and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By moving into close quarters against your foe (and choosing to charge)
                      roll_options:
                        - using: heart
                outcomes: &outcomes:mark_progress.HIT
                  strong_hit: *outcome:mark_progress
                  weak_hit: *outcome:mark_progress
              - augments:
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By moving into close quarters against your foe (and choosing to evade)
                      roll_options:
                        - using: edge
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              You wield an iconic blade. Give it a name. When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) by binding your promise to the blade, add +1. On a hit, fill the box below. If you make a move (including a progress move) using this oathbound blade and score a miss, you may clear the box to reroll any dice.
            options:
              name:
                label: Name
                field_type: text
            controls:
              oathbound_blade:
                label: Oathbound blade
                field_type: checkbox
                value: false
            # TODO: box input???
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By binding your promise to your iconic blade
                text: Add +1.
                outcomes:
                  strong_hit: &Blademaster.3
                    text: Fill the box below. If you make a move (including a progress move) using this oathbound blade and score a miss, you may clear the box to reroll any dice.
                  weak_hit: *Blademaster.3
      bounty_hunter:
        asset_type: Path
        name: Bounty Hunter
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you take a bounty contract and [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) to see it done, add +1. On a strong hit, you’ve got a solid lead and may mark progress on the quest. When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) on a hunt, make the legacy reward one rank higher (1 extra box if already epic).
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you take a bounty contract and [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) to see it done
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: You’ve got a solid lead and may mark progress on the quest.
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: On a hunt
                outcomes:
                  strong_hit:
                    text: Make the legacy reward one rank higher (1 extra box if already epic)
                  weak_hit:
                    text: Make the legacy reward one rank higher (1 extra box if already epic)
          - text: |-
              When you [Gather Information](id:starforged/moves/adventure/gather_information) related to a bounty, add +1. On a match, you reveal a surprising or sinister aspect of the contract; envision what you discover, and choose one.

                * Forge ahead: Mark progress on the quest. If you scored a strong hit with a match, also take +2 momentum.
                * Change loyalties: [Forsake Your Vow](id:starforged/moves/quest/forsake_your_vow) and mark 2 ticks on your bonds legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Related to a bounty
                text: Add +1.
                outcomes:
                  strong_hit:
                    match:
                      text: |-
                        You reveal a surprising or sinister aspect of the contract; envision what you discover, and choose one.

                          * Forge ahead: Mark progress on the quest, and take +2 momentum.
                          * Change loyalties: [Forsake Your Vow](id:starforged/moves/quest/forsake_your_vow) and mark 2 ticks on your bonds legacy track.
                  miss:
                    match: # can't be done via ref 'cause the take momentum bit changes
                      text: |-
                        You reveal a surprising or sinister aspect of the contract; envision what you discover, and choose one.

                          * Forge ahead: Mark progress on the quest.
                          * Change loyalties: [Forsake Your Vow](id:starforged/moves/quest/forsake_your_vow) and mark 2 ticks on your bonds legacy track.
          - text: |-
              When you [Take Decisive Action](id:starforged/moves/combat/take_decisive_action) in a fight against a bounty target or their agents, you may reroll one challenge die.
            augment_moves:
              - augments:
                  - starforged/moves/combat/take_decisive_action
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: In a fight against a bounty target or their agents
                outcomes: *outcomes:reroll_challenge_die_all
      brawler:
        asset_type: Path
        name: Brawler
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: If you fight unarmed or with a close quarters weapon...
        abilities:
          - text: |-
              When you [Gain Ground](id:starforged/moves/combat/gain_ground) by attempting to disarm, trip, shove, grapple, or stun your foe, add +1 and take +1 momentum on a hit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By attempting to disarm, trip, shove, grapple, or stun your foe (while fighting unarmed or with a close quarters weapon)
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you [Clash](id:starforged/moves/combat/clash) in close quarters, you may draw on your momentum to gain advantage. If you do, [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2) and choose one (before rolling).

                * Aggressive: Count a weak hit as a strong hit.
                * Defensive: Count a miss as a weak hit.
            augment_moves:
              - augments:
                  - starforged/moves/combat/clash
                # Cost: &Brawler.2.Cost
                #   - move: starforged/moves/suffer/lose_momentum
                #     value: 2
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Aggressively
                text: '[Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2).'
                outcomes:
                  weak_hit:
                    count_as: strong_hit
              - augments:
                  - starforged/moves/combat/clash
                # Cost: *Brawler.2.Cost
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Defensively
                text: '[Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2).'
                outcomes:
                  miss:
                    count_as: weak_hit
          - text: |-
              When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) already positioned in close quarters against your foe, mark progress on a hit. On a strong hit with a match, your initial assault leaves them stunned; also take +2 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Already positioned in close quarters against your foe
                outcomes:
                  strong_hit:
                    text: Mark progress.
                    match:
                      text: Your initial assault leaves them stunned; mark progress and take +2 momentum.
                  weak_hit: *outcome:mark_progress
      courier:
        asset_type: Path
        name: Courier
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) to transport and protect something precious, set its safety to 5. When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) or [Set a Course](id:starforged/moves/exploration/set_a_course) and score a weak hit or miss, you may suffer -1 safety as the cost. On a miss with a match, you must suffer -2 safety as the cost. When safety falls to 0, envision a major complication related to this mission. If you overcome the threat, mark progress twice on this quest. Then, set safety to 3.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To transport and protect something precious
                text: &set_safety When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) to transport and protect something precious, set its safety to 5.
                outcomes:
                  strong_hit:
                    text: *set_safety
                  weak_hit:
                    text: *set_safety
                  miss:
                    text: *set_safety
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                  - starforged/moves/exploration/set_a_course
                outcomes:
                  weak_hit:
                    text: &safety_cost |-
                      You may suffer -1 safety as the cost.

                      When safety falls to 0, envision a major complication related to this mission. If you overcome the threat, mark progress twice on this quest. Then, set safety to 3.
                  miss:
                    text: *safety_cost
                    match:
                      text: |-
                        You must suffer -2 safety as the cost.

                        When safety falls to 0, envision a major complication related to this mission. If you overcome the threat, mark progress twice on this quest. Then, set safety to 3.
          - # TODO: revisit - should this be post-roll text? what roll outcomes should it apply to?
            text: |-
              When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) to an unbonded connection by completing a courier mission, mark progress twice on the relationship.
            augment_moves:
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: To an unbonded connection by completing a courier mission
                text: Mark progress twice on the relationship.

          - text: |-
              When you [Sojourn](id:starforged/moves/recover/sojourn) during a courier mission, you may roll +safety. On a strong hit, take +1 safety or +1 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/recover/sojourn
                move_type: action_roll
                trigger:
                  conditions:
                    - text: During a courier mission
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/path/courier/condition_meter
                outcomes:
                  strong_hit:
                    text: Take +1 safety or +1 momentum.
        condition_meter:
          label: safety
          max: 5
          value: 0
          min: 0

      demolitionist:
        asset_type: Path
        name: Demolitionist
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you make a move to attack, destroy, or sabotage by deploying or triggering an explosive device, choose the value of your charge before rolling: normal=1, high=2, or overcharged=3. If either challenge die is equal to or less than the charge, count a weak hit as a strong hit. If not, and your action die is equal to or less than the charge, you are caught up in the destruction or set off an unintended effect; count a weak hit as a miss.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To attack, destroy, or sabotage by deploying or triggering an explosive device
                text: 'Choose the value of your charge before rolling: normal=1, high=2, or overcharged=3. If either challenge die is equal to or less than the charge, count a weak hit as a strong hit. If not, and your action die is equal to or less than the charge, you are caught up in the destruction or set off an unintended effect; count a weak hit as a miss.'
          - text: |-
              When you make a move to craft, modify, or disarm an explosive device, or if you threaten or provoke by arming an explosive device, add +1 and take +1 momentum on a hit.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To craft, modify, or disarm an explosive device, or if you threaten or provoke by arming an explosive device
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When your momentum is at its max, you may reset momentum (before rolling) to trigger an explosive device as you [Take Decisive Action](id:starforged/moves/combat/take_decisive_action). If you do, reroll any challenge dice.
            augment_moves:
              - augments:
                  - starforged/moves/combat/take_decisive_action
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: When your momentum is at its max, and you reset momentum (before rolling) to trigger an explosive device
                outcomes:
                  strong_hit: &outcome:reroll_challenge_dice
                    reroll: &reroll:challenge_dice
                      method: challenge_dice
                      text: Reroll any challenge dice.
                  weak_hit: *outcome:reroll_challenge_dice
                  miss: *outcome:reroll_challenge_dice
      devotant:
        asset_type: Path
        name: Devotant
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          name:
            label: name
            field_type: text
          linked_stat:
            label: Linked stat
            field_type: select_stat
            choices:
              edge:
                label: Edge
                value: edge
              heart:
                label: Heart
                value: heart
              iron:
                label: Iron
                value: iron
              shadow:
                label: Shadow
                value: shadow
              wits:
                label: Wits
                value: wits
        abilities:
          - text: |-
              You worship a god, power, or entity. Give it a name and choose one of your stats to represent its nature. When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) or [Gain Ground](id:starforged/moves/combat/gain_ground) by calling on it for guidance or aid, roll +linked stat. On a hit, take +1 momentum or +1 spirit. On a strong hit with a match, a miracle or sign manifests; take another +1 momentum or +1 spirit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By calling on your god, power, or entity for guidance or aid
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/path/devotant/options/linked_stat
                outcomes:
                  strong_hit:
                    text: &Devotant.1 Take +1 momentum or +1 spirit.
                    match:
                      text: |-
                        A miracle or sign manifests. Choose one:

                          * Take +2 spirit
                          * Take +2 momentum
                          * Take +1 spirit and +1 momentum
                  weak_hit:
                    text: *Devotant.1
          - text: |-
              When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) in service to your faith, roll +linked stat and take +2 momentum or +2 spirit on a hit. When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) on a divine quest (formidable or greater) and score a hit, also mark 2 ticks on your bonds legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In service to your faith
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/path/devotant/options/linked_stat
                outcomes:
                  strong_hit: &Devotant.2.1
                    text: Take +2 momentum or +2 spirit.
                  weak_hit: *Devotant.2.1
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: On a divine quest (formidable or greater)
                outcomes: &outcomes:bonds_2_ticks_on_hit
                  strong_hit: &outcome:bonds_2_ticks
                    text: Mark 2 ticks on your bonds legacy track.
                  weak_hit: *outcome:bonds_2_ticks
          - text: |-
              When you [Hearten](id:starforged/moves/recover/hearten) through contemplation or sharing of your faith, you may roll +linked stat. If you do, take +1 spirit or +1 momentum on a strong hit.
            augment_moves:
              - augments:
                  - starforged/moves/recover/hearten
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Through contemplation or sharing of your faith
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/path/devotant/options/linked_stat
                outcomes:
                  strong_hit:
                    text: Take +1 spirit or +1 momentum.
      diplomat:
        asset_type: Path
        name: Diplomat
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) to resolve a dispute, negotiate an agreement, or gather support, add +1. On a strong hit, mark progress on the quest. When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) on a diplomatic mission (formidable or greater) and score a hit, also mark 2 ticks on your bonds legacy track.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To resolve a dispute, negotiate an agreement, or gather support
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Mark progress on the quest.
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: On a diplomatic mission (formidable or greater)
                outcomes: *outcomes:bonds_2_ticks_on_hit
          - text: |-
              When you make a move to defuse, reason, or negotiate, add +1. On a miss, you may take a different tack. Envision this new approach, reroll all dice, and add +2. If you score a miss yet again, face a dire complication or blow to your reputation as you [Pay the Price](id:starforged/moves/fate/pay_the_price).
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To defuse, reason, or negotiate
                text: Add +1.
                outcomes:
                  miss:
                    reroll:
                      text: |-
                        You may take a different tack. Envision this new approach, reroll all dice, and add +2. If you score a miss yet again, face a dire complication or blow to your reputation as you [Pay the Price](id:starforged/moves/fate/pay_the_price).
                      method: all
          - text: |-
              When you [Make a Connection](id:starforged/moves/connection/make_a_connection) or [Sojourn](id:starforged/moves/recover/sojourn), add +1. If you [Sojourn](id:starforged/moves/recover/sojourn) and score a strong hit with a match, you are shown great kindness or respect; take +2 momentum or make an extra recover move with an automatic strong hit.
            augment_moves:
              - augments:
                  - starforged/moves/connection/make_a_connection
                  - starforged/moves/connection/sojourn
                text: Add +1.
              - augments:
                  - starforged/moves/connection/sojourn
                outcomes:
                  strong_hit:
                    match:
                      text: You are shown great kindness or respect; take +2 momentum or make an extra recover move with an automatic strong hit.
      empath:
        asset_type: Path
        name: Empath
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: &move:Asset.Empath |-
              When you read the intent, emotions, or memories of a nearby being, roll +heart. On a strong hit, you glimpse a helpful aspect of their inner self. Envision what you learn, take +2 momentum, and add +1 when you make moves to interact with them in this scene. On a weak hit, the visions are murky; take +1 momentum. On a miss, you reveal a troubling motive or secret; [Pay the Price](id:starforged/moves/fate/pay_the_price).
            enabled: true
            moves:
              read_heart:
                name: Read Heart
                move_type: action_roll
                trigger:
                  text: When you read the intent, emotions, or memories of a nearby being...
                  conditions:
                    - method: any
                      roll_options:
                        - using: heart
                text: *move:Asset.Empath
                outcomes:
                  strong_hit:
                    text: |-
                      You glimpse a helpful aspect of their inner self. Envision what you learn, take +2 momentum, and add +1 when you make moves to interact with them in this scene.
                  weak_hit:
                    text: |-
                      The visions are murky; take +1 momentum.
                  miss:
                    text: |-
                      You reveal a troubling motive or secret; [Pay the Price](id:starforged/moves/fate/pay_the_price).
          - text: |-
              As above, and if you score a hit as you read them, you may subtly influence their attitude or actions, such as making a hostile being hesitate. Take another +1 momentum. If in a fight, mark progress.
            augment_moves:
              - augments:
                  - starforged/assets/path/empath/abilities/0/moves/read_heart
                outcomes:
                  strong_hit: &Empath.2
                    text: You may subtly influence their attitude or actions, such as making a hostile being hesitate. Take another +1 momentum. If in a fight, mark progress.
                  weak_hit: *Empath.2
          - text: |-
              When you [Face Danger](id:starforged/moves/adventure/face_danger) to soothe a being’s distress by creating an empathic bond, roll +spirit and take +1 momentum on a hit. If they are an ally, also give them +2 spirit on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To soothe a being's distress by creating an empathic bond
                      method: any
                      roll_options:
                        - using: spirit
                outcomes:
                  strong_hit: &Empath.3
                    text: Take +1 momentum. If they are an ally, also give them +2 spirit.
                  weak_hit: *Empath.3
      explorer:
        asset_type: Path
        name: Explorer
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Explore a Waypoint](id:starforged/moves/exploration/explore_a_waypoint), take +1 momentum on a hit. When you [Finish an Expedition](id:starforged/moves/exploration/finish_an_expedition) and score a hit, mark 1 extra tick on your discoveries legacy track.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/exploration/explore_a_waypoint
                outcomes: *outcomes:+1_momentum.HIT
              - augments:
                  - starforged/moves/exploration/finish_an_expedition
                outcomes:
                  strong_hit: &1_extra_discovery_tick
                    text: Mark 1 extra tick on your discoveries legacy track.
                  weak_hit: *1_extra_discovery_tick
          - # TODO: non move trigger
            text: |-
              When you come across a wondrous sight or phenomenon, such as an extraordinary planet, majestic creature, or dazzling stellar object, choose one:

                * Find inspiration: Take +1 momentum
                * Soak it all in: [Hearten](id:starforged/moves/recover/hearten); add +1, and take +1 momentum on a hit.
          - text: |-
              When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) by studying a newfound place from a safe position, add +1 and take +1 momentum on a hit. On a strong hit with a match, take another +1 momentum and envision an unusual aspect of the site.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By studying a newfound place from a safe position
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: Take +2 momentum and envision an unusual aspect of the site.
                  weak_hit: *outcome:+1_momentum
      fated:
        asset_type: Path
        name: Fated
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you fill a box on your background vow progress track, also mark 1 tick on your quests legacy track. When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) on the background vow, your fate is at hand; take an automatic strong hit and envision the final sacrifice that brings your story to an end.
            enabled: true
            # TODO: non move trigger (fill background vow progress)
            augment_moves:
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: On your background vow
                      method: strong_hit
                text: Your fate is at hand; take an automatic strong hit and envision the final sacrifice that brings your story to an end.
          - text: |-
              When you [Face Death](id:starforged/moves/threshold/face_death) or [Face Desolation](id:starforged/moves/threshold/face_desolation) while your background vow is unfulfilled, it is not yet your time. Instead of rolling, you may take an automatic strong hit. If you do, this asset counts as an impact (and you no longer have this protection) until you next [Reach a Milestone](id:starforged/moves/quest/reach_a_milestone) on the background vow.
            # TODO: conditional impact
            augment_moves:
              - augments:
                  - starforged/moves/threshold/face_death
                  - starforged/moves/threshold/face_desolation
                move_type: action_roll
                trigger:
                  conditions:
                    - text: While your background vow is unfulfilled
                      method: strong_hit
                text: It is not yet your time. Instead of rolling, you may take an automatic strong hit. If you do, this asset counts as an impact (and you no longer have this protection) until you next [Reach a Milestone](id:starforged/moves/quest/reach_a_milestone) on the background vow.
          - text: |-
              When you make any progress move directly related to your background vow, and roll a 10 on either challenge die, you may reroll that die. On a strong hit, take +2 momentum.
            augment_moves:
              - move_type: progress_roll
                trigger:
                  conditions:
                    - text: When you make any progress move directly related to your background vow
                outcomes:
                  strong_hit:
                    text: Take +2_momentum.
                    reroll: &reroll:challenge_die_10
                      text: If you roll a 10 on either challenge die, you may reroll that die.
                      method: challenge_die
                  weak_hit: &outcome:reroll_challenge_die_10
                    reroll: *reroll:challenge_die_10
                  miss: *outcome:reroll_challenge_die_10
      firebrand:
        asset_type: Path
        name: Firebrand
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: &move:Asset.Firebrand |-
              You wield fiery energy. When you rest and meditate to gather this energy, roll +spirit. On a strong hit, take up to +3 fire. On a weak hit, take +2. On a miss, take +2 fire but [Endure Harm](id:starforged/moves/suffer/endure_harm) (-2). Your max fire is +5. When you make moves aided by this energy to attack or overcome obstacles, add +2 and suffer -1 fire.
            enabled: true
            moves:
              gather_energy:
                name: Gather Energy
                move_type: action_roll
                trigger:
                  text: When you rest and meditate to gather fiery energy...
                  conditions:
                    - method: any
                      roll_options:
                        - using: spirit
                text: *move:Asset.Firebrand
                outcomes:
                  strong_hit:
                    text: |-
                      Take up to +3 fire.

                      When you make moves aided by this energy to attack or overcome obstacles, add +2 and suffer -1 fire.
                  weak_hit:
                    text: |-
                      Take up to +2 fire.

                      When you make moves aided by this energy to attack or overcome obstacles, add +2 and suffer -1 fire.
                  miss:
                    text: |-
                      Take up to +2 fire but [Endure Harm](id:starforged/moves/suffer/endure_harm) (-2).

                      When you make moves aided by this energy to attack or overcome obstacles, add +2 and suffer -1 fire.
          - text: |-
              When you [Endure Harm](id:starforged/moves/suffer/endure_harm) and score a strong hit with a match, you may instead ignore the harm and take +fire equal to the amount of harm faced (+1, +2, or +3).
            augment_moves:
              - augments:
                  - starforged/moves/suffer/endure_harm
                outcomes:
                  strong_hit:
                    match:
                      text: You may instead ignore the harm and take +fire equal to the amount of harm faced (+1, +2, or +3).
          - text: |-
              When you have at least +3 fire, you may [Gain Ground](id:starforged/moves/combat/gain_ground) or [Strike](id:starforged/moves/combat/strike) by unleashing hell. If you do, take an automatic strong hit and mark progress. Then, set your fire to 0.
            augment_moves:
              - augments:
                  - starforged/moves/combat/gain_ground
                  - starforged/moves/combat/strike
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you have at least +3 fire and unleash hell
                      method: strong_hit
                text: Take an automatic strong hit and mark progress. Then, set your fire to 0.
        condition_meter:
          label: fire
          max: 5
          value: 0
          min: 0

      fugitive:
        asset_type: Path
        name: Fugitive
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              You are hunted by a power or authority. When you make a move, you may improve the result to a strong hit. If you do, fill one segment of a four-segment clock to represent hunters closing in. When the clock is filled, a notable foe or force has tracked you down. If you overcome them or escape, reset the clock and mark 1 tick on your quests legacy track.
            controls:
              clock:
                label: Notable foe or force tracks you down
                field_type: clock
                max: 4
                value: 0
                min: 0
                # position: ability_0_right
            # TODO: consider some kind of clock event object/message?
            enabled: true
          - text: |-
              When you make a move by hiding, concealing your identity, or fleeing from a pursuer, add +1 and take +1 momentum on a hit.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: By hiding, concealing your identity, or fleeing from a pursuer
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) (extreme or greater) by clearing your name or defeating the power or authority who marked you as a fugitive, gain this ability at no cost. You may then exchange this asset for another with the same number of marked abilities.
            # TODO: figure out if there's a sensible way to handle this
            # Alter moves:
            #   - moves:
            #       - starforged/moves/quest/fulfill_your_vow
            #     trigger:
            #       options:
            #         - text: By clearing your name or defeating the power or authority who marked you as a fugitive (extreme or greater)
            #           move_type: progress_roll
            #           method: null

      gearhead:
        asset_type: Path
        name: Gearhead
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you make a move to craft, repair, repurpose, or modify equipment or technology, add +1 and take +1 momentum on a hit.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To craft, repair, repurpose, or modify equipment or technology
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you [Gather Information](id:starforged/moves/adventure/gather_information) by studying or disassembling a machine or device, reroll any dice. On a match, you reveal an unexpected function, capability, or danger; mark 1 tick on your discoveries legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By studying or disassembling a machine or device
                outcomes:
                  strong_hit: &Gearhead.2
                    match:
                      text: You reveal an unexpected function, capability, or danger; mark 1 tick on your discoveries legacy track.
                    reroll: *reroll:any
                  weak_hit: *outcome:reroll_any
                  miss: *Gearhead.2
          - text: |-
              With sufficient time (a couple of hours or more), you may [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) to assemble or enhance a device for a powerful but limited role. On a hit, the device is ready for use. One time only, when you or an ally make a move aided by the device, take an automatic strong hit. If you are in a fight, also mark progress.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By spending sufficient time (a couple of hours or more) to assemble or enhance a device for a powerful but limited role
                outcomes:
                  strong_hit: &Gearhead.3
                    text: The device is ready for use. One time only, when you or an ally make a move aided by the device, take an automatic strong hit. If you are in a fight, also mark progress.
                  weak_hit: *Gearhead.3
              # TODO: separate move extension for device use?
      gunner:
        asset_type: Path
        name: Gunner
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: If you wield a heavy ranged personal weapon...
        abilities:
          - text: |-
              When you [Strike](id:starforged/moves/combat/strike), choose one (before rolling).

                * Pin them down: Add +1 and take +1 momentum on a hit.
                * Make them hurt: Mark progress on a hit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/combat/strike
                move_type: action_roll
                trigger:
                  conditions:
                    - text: If you [Strike](id:starforged/moves/combat/strike) with a heavy ranged personal weapon and choose to pin them down
                      # FIXME: phrase less awkwardly - ditto the one below
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
              - augments:
                  - starforged/moves/combat/strike
                move_type: action_roll
                trigger:
                  conditions:
                    - text: If you [Strike](id:starforged/moves/combat/strike) with a heavy ranged personal weapon and choose to make them hurt
                outcomes: *outcomes:mark_progress.HIT
          - text: |-
              When you [Take Decisive Action](id:starforged/moves/combat/take_decisive_action) by emptying your gun (decide before rolling), you may [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1) and reroll one challenge die. If the fight continues or you are caught up another fight, [Check Your Gear](id:starforged/moves/adventure/check_your_gear) to see if you have more ammo on-hand.
            augment_moves:
              - augments:
                  - starforged/moves/combat/take_decisive_action
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: By emptying your gun as you [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1)
                outcomes:
                  strong_hit: &Gunner.2
                    text: If the fight continues or you are caught up another fight, [Check Your Gear](id:starforged/moves/adventure/check_your_gear) to see if you have more ammo on-hand.
                    reroll: *reroll:challenge_die
                  weak_hit: *Gunner.2
                  miss: *Gunner.2
          - text: |-
              Give your favorite gun a name. When you [Clash](id:starforged/moves/combat/clash) with it, add +1. When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) or [Endure Stress](id:starforged/moves/suffer/endure_stress) while wielding it, add +1 and take +1 momentum on a hit.
            options:
              name:
                label: Name
                field_type: text
            augment_moves:
              - augments:
                  - starforged/moves/combat/clash
                move_type: action_roll
                trigger:
                  conditions:
                    - text: With your favorite gun
                text: Add +1.
              - augments:
                  - starforged/moves/combat/enter_the_fray
                  - starforged/moves/suffer/endure_stress
                move_type: action_roll
                trigger:
                  conditions:
                    - text: While wielding your favorite gun
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
      gunslinger:
        asset_type: Path
        name: Gunslinger
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: If you wield a pistol...
        abilities:
          - text: |-
              When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) by facing off against your foe (+heart), or by preparing to act without tipping them off (+shadow), add +1 and take +1 momentum on a hit. On a strong hit with a match, you may immediately take a shot (without making a move) and mark progress twice.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By facing off against your foe
                      roll_options:
                        - using: heart
                    - text: By preparing to act without tipping off your foe
                      roll_options:
                        - using: shadow
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: Take +1 momentum. You may immediately take a shot (without making a move) and mark progress twice.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              When you [Gain Ground](id:starforged/moves/combat/gain_ground) or [React Under Fire](id:starforged/moves/combat/react_under_fire) by moving into cover, add +1. On a strong hit, this cover gives you leverage; add +1 when you make a move to attack or defend at range. If you then score a miss, the cover is lost or compromised.
            augment_moves:
              - augments:
                  - starforged/moves/combat/gain_ground
                  - starforged/moves/combat/react_under_fire
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By moving into cover
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Your cover gives you leverage; add +1 when you make a move to attack or defend at range. If you then score a miss, the cover is lost or compromised.
          - text: |-
              When you [Compel](id:starforged/moves/adventure/compel) or [Gain Ground](id:starforged/moves/combat/gain_ground) with the threat of violence by holding someone at gunpoint, add +1 and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/compel
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: With the threat of violence by holding someone at gunpoint
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
      haunted:
        asset_type: Path
        name: Haunted
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              You are haunted by the spirit of someone whose death you caused or mourn (or both). When you make a move to call upon their insight, add +1. On a weak hit, also [Endure Stress](id:starforged/moves/suffer/endure_stress) (-1). On a strong hit with a match, mark 1 tick on your bonds legacy track.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a move to call upon the insight of the spirit that haunts you
                text: Add +1.
                outcomes:
                  strong_hit:
                    match: &outcome:bonds_1_tick
                      text: Mark 1 tick on your bonds legacy track.
                  weak_hit:
                    text: '[Endure Stress](id:starforged/moves/suffer/endure_stress) (-1).'
          - text: |-
              When you [Face Death](id:starforged/moves/threshold/face_death) guided by the spirit, add +1. On a strong hit, envision what you learn from them or about them, and mark 2 ticks on your bonds legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/threshold/face_death
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Guided by the spirit that haunts you
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Envision what you learn from them or about them, and mark 2 ticks on your bonds legacy track.
          - text: |-
              One time only, when you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) (extreme or greater) in service to the spirit, take this ability at no cost and choose one.

                * Let them go: Mark 2 ticks on your bonds legacy track for each marked ability, and discard this asset.
                * Bolster your link: When you use a HAUNTED asset ability, take +1 momentum on a hit.
            # if this asset ability is enabled, it's probably safe to assume they've kept the asset (and, thus, taken the second choice)
            # augment_abilities:
            #   - augments:
            #       - starforged/assets/path/haunted/abilities/0
            #       - starforged/assets/path/haunted/abilities/1
            #     augment_moves:
            #       - outcomes: *outcomes:+1_momentum.HIT
      healer:
        asset_type: Path
        name: Healer
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you give medical care to [Heal](id:starforged/moves/recover/heal) yourself or another character, add +1. If you are treating someone other than yourself, take +1 spirit or +1 momentum on a hit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/recover/heal
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Give medical care to yourself
                text: Add +1.
              - augments:
                  - starforged/moves/recover/heal
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Give medical care to another character
                text: Add +1.
                outcomes:
                  strong_hit: &Healer.1
                    text: Take +1 spirit or +1 momentum on a hit.
                  weak_hit: *Healer.1
          - text: |-
              When you [Gather Information](id:starforged/moves/adventure/gather_information) by studying medical evidence or biological remains, add +1 and take +1 momentum on a hit. On a strong hit with a match, you also reveal an unexpected medical anomaly; mark 1 tick on your discoveries legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By studying medical evidence or biological remains
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: Take +1 momentum. You also reveal an unexpected medical anomaly; mark 1 tick on your discoveries legacy track.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              Once every day or so, when you are in a safe place with plenty of time on your hands, you may [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1) and provide basic medical care for yourself, companions, or allies without risk. If you do, roll only your action die. On a 1-4, automatically give +1 health to everyone whose health is greater than 0. On a 5-6, make it +2.
            # TODO: style as move?
      infiltrator:
        asset_type: Path
        name: Infiltrator
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you make a move to break into a secure site, infiltrate a protected area, or hack or manipulate a secure system, add +1 and take +1 momentum on a hit. On a strong hit with a match, access is easier than expected; take another +1 momentum.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To break into a secure site, infiltrate a protected area, or hack or manipulate a secure system
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: Access is easier than expected. Take +2 momentum.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              When you [Face Danger](id:starforged/moves/adventure/face_danger) or [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) to establish a false identity, add +1. On a hit, you may add +1 when using that identity to deceive or influence others. If you score a miss with a match when using that identity, your deception is completely and dramatically undone.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To establish a false identity
                text: Add +1.
                outcomes:
                  strong_hit: &Infiltrator.2
                    text: |-
                      You may add +1 when using that identity to deceive or influence others.

                      If you score a miss with a match when using that identity, your deception is completely and dramatically undone.
                  weak_hit: *Infiltrator.2
          - text: |-
              When you [Check Your Gear](id:starforged/moves/adventure/check_your_gear) for a device with a specific function to aid in infiltration, espionage, or sabotage, add +1. On a hit, reroll any dice the first time you make a move aided by the device.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/check_your_gear
                move_type: action_roll
                trigger:
                  conditions:
                    - text: For a device with a specific function to aid in infiltration, espionage, or sabotage
                text: Add +1.
                outcomes:
                  strong_hit: &Infiltrator.3
                    text: Reroll any dice the first time you make a move aided by the device.
                  weak_hit: *Infiltrator.3
      kinetic:
        asset_type: Path
        name: Kinetic
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              You wield kinetic powers. By focusing, you may remotely push, pull, lift, or constrict objects and beings that are about your size or smaller. When you are in a risky situation and draw on your powers to make a move, add +2 and [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2).
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you are in a risky situation and draw on your kinetic powers to make a move
                text: Add +2 and [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2).
          - text: |-
              As above, but you may instead draw on your powers in a desperate effort to change the outcome of an action. If you do, add +2 (after you roll) and [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-3).
            # TODO: non-move trigger? sth to handle after the fact triggers?
            # alternatively: non-trigger move add-in?
          - text: |-
              When your momentum is at its max, you may attempt great kinetic feats, such as manipulating large objects and creating destructive bursts of concussive force. To do so, reset momentum. Then, as you make a single move fueled by your powers, take an automatic strong hit. If you are in a fight, mark progress.
            # TODO: flag for requiring max momentum?
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: Your momentum is at its max, and you attempt great kinetic feats (such as manipulating large objects and creating destructive bursts of concussive force)
                      method: strong_hit
                text: Reset momentum. Then, as you make a single move fueled by your powers, take an automatic strong hit. If you are in a fight, mark progress.
      leader:
        asset_type: Path
        name: Leader
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Aid Your Ally](id:starforged/moves/adventure/aid_your_ally) through leadership, coordination, or planning, add +1. On a strong hit, any allies who are present take +1 momentum.
            enabled: true
            augment_moves:
              - augments:
                  &aid_your_ally_moves # TODO: is there a smarter way to handle the move "forwarding"?
                  - starforged/moves/adventure/aid_your_ally
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you [Aid Your Ally](id:starforged/moves/adventure/aid_your_ally) through leadership, coordination, or planning
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Any allies who are present take +1 momentum.
          - text: |-
              When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) (+heart) by coordinating with your team as they wade into the fight, make your move before your allies act. On a strong hit, all allies may take an automatic strong hit. On a strong hit with a match, also mark progress on any objectives in this fight.
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By coordinating with your team as they wade into the fight
                text: Make your move before your allies act.
                outcomes:
                  strong_hit:
                    text: All allies may take an automatic strong hit.
                    match:
                      text: All allies may take an automatic strong hit, and mark progress on any objectives in this fight
          - text: |-
              When you make a move to influence someone (not an ally) through leadership, add +1 and take +1 momentum on a hit. On a strong hit with a match, your command galvanizes them into unexpected action. Take another +1 momentum, and mark 1 tick on your bonds legacy track.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To influence someone (not an ally) through leadership
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: Your command galvanizes them into unexpected action. Take +2 momentum, and mark 1 tick on your bonds legacy track.
                  weak_hit: *outcome:+1_momentum
      looper:
        asset_type: Path
        name: Looper
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you score a miss on a suffer move (not [Endure Stress](id:starforged/moves/suffer/endure_stress)), you may loop back a second or two. If you do, [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2), reroll any dice, and take +1 momentum on a strong hit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/suffer/endure_harm
                  - starforged/moves/suffer/companion_takes_a_hit
                  - starforged/moves/suffer/withstand_damage
                  # the other ones don't involve a roll, so they're omitted
                outcomes:
                  miss:
                    text: You may loop back a second or two. If you do, [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2), reroll any dice, and take +1 momentum on a strong hit.
                    reroll: *reroll:any
                    # TODO: possible to add cost option here?
          - text: &move:Asset.Looper |-
              When you create a link to the current point in time, note the value of condition meters for you and your allies. You can retain only one active link. If you later loop back to this moment, roll +the gap in time: +4 if minutes, +3 if hours, or +2 if days. You may not burn momentum on this roll. On a strong hit, return to the linked point, retain any progress, and set condition meters (except for spirit) to their original values. On a weak hit, as above, but [Endure Stress](id:starforged/moves/suffer/endure_stress) (-2). On a miss, as with a strong hit, but you find the timeline corrupted; [Pay the Price](id:starforged/moves/fate/pay_the_price).
            moves:
              loop_back:
                name: Loop Back
                # Burn momentum: false
                #TODO: add to IMove? Move usage?
                move_type: action_roll
                trigger:
                  text: When you loop back to a linked moment in time...
                  conditions:
                    - method: any
                      # time_gap
                      roll_options:
                        - using: custom_value
                          label: Minutes
                          value: 4
                        - using: custom_value
                          label: Hours
                          value: 3
                        - using: custom_value
                          label: Days
                          value: 2

                text: *move:Asset.Looper
                outcomes:
                  strong_hit:
                    text: |-
                      You and your allies return to the linked point, retain any progress, and set condition meters (except for spirit) to their original values.
                  weak_hit:
                    text: |-
                      You and your allies return to the linked point, retain any progress, and set condition meters (except for spirit) to their original values

                      However, you [Endure Stress](id:starforged/moves/suffer/endure_stress) (-2).
                  miss:
                    text: |-
                      You and your allies return to the linked point, retain any progress, and set condition meters (except for spirit) to their original values.

                      However, you find the timeline corrupted! [Pay the Price](id:starforged/moves/fate/pay_the_price).
          - text: |-
              When you make a reroll granted by any asset ability on an action roll, also add +1.
            # TODO: this is a weird one! is there a non-silly way to apply this to every action die reroll from an asset ability?
            # what about "Alters: null"? is there a way to make it explicit that it's only supposed to be added to those?
      lore_hunter:
        asset_type: Path
        name: Lore Hunter
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) (formidable or greater) to recover valuable knowledge or an extraordinary relic, reroll any dice. When you [Reach a Milestone](id:starforged/moves/quest/reach_a_milestone) in the pursuit of that quest, take +2 momentum. When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) and score a hit, also mark 2 ticks on your discoveries legacy track.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: &Lore_Hunter.Quest To recover valuable knowledge or an extraordinary relic (formidable or greater)
                outcomes:
                  strong_hit: &Lore_Hunter.1
                    text: When you [Reach a Milestone](id:starforged/moves/quest/reach_a_milestone) in the pursuit of that quest, take +2 momentum.
                    reroll: *reroll:any
                  weak_hit: *Lore_Hunter.1
                  miss: *Lore_Hunter.1

              # - moves:
              #   - starforged/moves/quest/reach_a_milestone

              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: *Lore_Hunter.Quest
                outcomes:
                  strong_hit: &Lore_Hunter.1
                    text: Also mark 2 ticks on your discoveries legacy track.
                  weak_hit: *Lore_Hunter.1
          - text: |-
              When you make a move to conduct extended research or study, reroll any challenge dice. On a match, you piece together an extraordinary or harrowing new theory; envision the nature of this revelation and mark 1 tick on your discoveries legacy track.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To conduct extended research or study
                outcomes:
                  strong_hit: &Lore_Hunter.2
                    reroll: *reroll:challenge_dice
                    match:
                      text: You piece together an extraordinary or harrowing new theory; envision the nature of this revelation and mark 1 tick on your discoveries legacy track.
                  miss: *Lore_Hunter.2
          - text: |-
              When you recall esoteric knowledge to [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) or [Gain Ground](id:starforged/moves/combat/gain_ground), add +1. On a hit, envision the obscure but helpful fact, theory, or technique you put to use, and take +1 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you recall esoteric knowledge
                text: Add +1.
                outcomes:
                  strong_hit: &Lore_Hunter.2
                    text: Envision the obscure but helpful fact, theory, or technique you put to use, and take +1 momentum.
                  weak_hit: *Lore_Hunter.2
      loyalist:
        asset_type: Path
        name: Loyalist
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Aid Your Ally](id:starforged/moves/adventure/aid_your_ally), add +1 and take +1 momentum on a hit. This is in addition to the benefits taken by your ally. On a strong hit with a match, envision how this moment marks a breakthrough or milestone in your relationship; both of you may mark 1 tick on your bonds legacy track.
            enabled: true
            augment_moves:
              - augments: *aid_your_ally_moves
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you [Aid Your Ally](id:starforged/moves/adventure/aid_your_ally)
                text: Add +1 (in addition to the benefits taken by your ally).
                outcomes:
                  strong_hit:
                    text: Take +1 momentum (in addition to the benefits taken by your ally).
                    match:
                      text: Take +1 momentum (in addition to the benefits taken by your ally). Envision how this moment marks a breakthrough or milestone in your relationship; both of you may mark 1 tick on your bonds legacy track.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              You may burn momentum on behalf of an ally to improve their result on a move. If you do, your ally takes +1 momentum.
            # augment_player:
            #   momentum:
            #     burn:
            #       - trigger:
            #           text: On behalf of an ally to improve their result on a move
            #         effect:
            #           text: Your ally takes +1 momentum.
          - text: |-
              When you stand with your ally as they make a progress move, envision how you support them. Then, roll one challenge die. On a 1-9, your ally may replace one of their challenge dice with yours. On a 10, envision how you inadvertently undermine their action; your ally must replace their lowest challenge die with yours.
            # TODO: implement "by ally" flag interface
            augment_moves:
              - move_type: progress_roll
                trigger:
                  conditions:
                    - text: When you stand with your ally as they make a progress move
                      by:
                        ally: true
                        player: false
                text: Envision how you support your ally. Then, roll one challenge die. On a 1-9, your ally may replace one of their challenge dice with yours. On a 10, envision how you inadvertently undermine their action; your ally must replace their lowest challenge die with yours.
      mercenary:
        asset_type: Path
        name: Mercenary
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you agree to wage war or defend others from war in exchange for payment or promises, you may [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) to see the mission done. If you do, reroll any dice. When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow), make the legacy reward one rank higher (1 extra box if already epic).
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To wage war or defend others from war in exchange for payment or promises
                outcomes: *outcomes:reroll_any.ALL
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: To wage war or defend others from war in exchange for payment or promises
                outcomes:
                  strong_hit: &Mercenary.1
                    text: Make the legacy reward one rank higher (1 extra box if already epic).
                  weak_hit: *Mercenary.1
          - text: |-
              When you [Make a Connection](id:starforged/moves/connection/make_a_connection) by searching out or making contact with someone in need of your services, add +1 and take +1 momentum on a hit. On a strong hit with a match, this mission pits you against an unresolved aspect of your past or a hated foe; mark 2 ticks on your quests legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/connection/make_a_connection
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By searching out or making contact with someone in need of your services
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: This mission pits you against an unresolved aspect of your past or a hated foe; mark 2 ticks on your quests legacy track, and take +1 momentum.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              When you [Check Your Gear](id:starforged/moves/adventure/check_your_gear) in the midst of a fight, or [Resupply](id:starforged/moves/recover/resupply) by looting the field of battle in the aftermath of a fight, add +2.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/check_your_gear
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In the midst of a fight
                text: Add +2.
              - augments:
                  - starforged/moves/recover/resupply
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By looting the field of battle in the aftermath of a fight
                text: Add +2.
      naturalist:
        asset_type: Path
        name: Naturalist
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) or [Gather Information](id:starforged/moves/adventure/gather_information) using your knowledge of lifeforms or planetside ecosystems, add +1 and take +1 momentum on a hit. On a strong hit with a match, you also confirm an obscure theory or reveal a surprising aspect of the encounter; mark 1 tick on your discoveries legacy track.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Using your knowledge of lifeforms or planetside ecosystems
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: Take +1 momentum. You also confirm an obscure theory or reveal a surprising aspect of the encounter; mark 1 tick on your discoveries legacy track.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              When you make a move by taking a risky action to pacify, avoid, or outwit a creature (decide before rolling), you may reroll any dice, but must [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2).
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: By taking a risky action to pacify, avoid, or outwit a creature
                outcomes:
                  strong_hit: &Naturalist.2
                    reroll:
                      method: any
                      text: You may reroll any dice, but must [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2).
                  weak_hit: *Naturalist.2
                  miss: *Naturalist.2
          - text: |-
              You are skilled at planetside survival. When you [Resupply](id:starforged/moves/recover/resupply) to scavenge resources in a life-bearing natural environment, take +1 supply on a hit. When you [Face Danger](id:starforged/moves/adventure/face_danger) against an environmental threat, add +1 and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/recover/resupply
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To scavenge resources in a life-bearing natural environment
                outcomes:
                  strong_hit: &+1_supply
                    text: Take +1 supply.
                  weak_hit: *+1_supply
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Against an environmental threat
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
      navigator:
        asset_type: Path
        name: Navigator
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Set a Course](id:starforged/moves/exploration/set_a_course), choose one.

                * Follow the fastest path: Take +2 momentum on a strong hit.
                * Follow the safest path: Add +1

              On a strong hit with a match, you charted a new path during the journey; mark 1 tick on your discoveries legacy track.
            enabled: true
            # TODO: split triggers
            augment_moves:
              - augments:
                  - starforged/moves/exploration/set_a_course
                text: |-
                  Choose one.

                    * Follow the fastest path: Take +2 momentum on a strong hit.
                    * Follow the safest path: Add +1
                outcomes:
                  strong_hit:
                    match:
                      text: You charted a new path during the journey; mark 1 tick on your discoveries legacy track.
          - text: |-
              When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) by charting the way forward, [Face Danger](id:starforged/moves/adventure/face_danger) to find a path around a hazard, or [Gather Information](id:starforged/moves/adventure/gather_information) about a location by studying your charts, add +1 and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By charting the way forward
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To find a path around a hazard
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
              - augments:
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: About a location by studying your charts
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: &Navigator.3 |-
              Once per expedition, when you or an ally [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) and score a weak hit or miss, you may ignore that result, plot an alternate path, and make it an automatic strong hit.
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                move_type: action_roll
                trigger:
                  conditions:
                    - by:
                        player: true
                        ally: true
                outcomes:
                  weak_hit:
                    text: *Navigator.3
                  miss:
                    text: *Navigator.3
      outcast:
        asset_type: Path
        name: Outcast
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Hearten](id:starforged/moves/recover/hearten) in isolation, you may attempt to find solace in fond memories or a hopeful wish. If you do (decide before rolling), reroll any dice but count a strong hit as a weak hit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/recover/hearten
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In isolation, attempting find solace in fond memories or a hopeful wish.
                outcomes:
                  strong_hit:
                    count_as: weak_hit
                    reroll: *reroll:any
                  weak_hit: *outcome:reroll_any
                  miss: *outcome:reroll_any
          - text: &move:Asset.Outcast |-
              When you [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) and your supply is reduced to 0, roll +wits. On a strong hit, you manage to scrape by and take +1 supply. On a weak hit, you may [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1) in exchange for +1 supply. On a miss, your supply remains at 0 and you [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1).
            moves:
              scrape_by:
                name: Scrape By
                move_type: action_roll
                trigger:
                  text: When you [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) and your supply is reduced to 0...
                  conditions:
                    - method: any
                      roll_options:
                        - using: wits
                text: *move:Asset.Outcast
                outcomes:
                  strong_hit:
                    text: You manage to scrape by and take +1 supply.
                  weak_hit:
                    text: You may [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1) in exchange for +1 supply.
                  miss:
                    text: Your supply remains at 0 and you [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1).
          - text: |-
              When you or an ally [Sojourn](id:starforged/moves/recover/sojourn) and score a strong hit with a match, you may envision encountering someone who knows or understands you. If you [Make a Connection](id:starforged/moves/connection/make_a_connection) with them, take an automatic strong hit and mark 2 ticks on your bonds legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/recover/sojourn
                move_type: action_roll
                trigger:
                  conditions:
                    - by:
                        player: true
                        ally: true
                outcomes:
                  strong_hit:
                    match:
                      text: You may envision encountering someone who knows or understands you. If you [Make a Connection](id:starforged/moves/connection/make_a_connection) with them, take an automatic strong hit and mark 2 ticks on your bonds legacy track.
      scavenger:
        asset_type: Path
        name: Scavenger
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Gather Information](id:starforged/moves/adventure/gather_information) or [Resupply](id:starforged/moves/recover/resupply) by scavenging a wreck, ruin, or abandoned site, add +1 and take +1 momentum on a hit. On a strong hit with a match, you also find something of unique value, significance, or function; envision the nature of this discovery, take +2 momentum, and mark 2 ticks on your discoveries legacy track.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By scavenging a wreck, ruin, or abandoned site
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum
                    match:
                      text: You find something of unique value, significance, or function; envision the nature of this discovery, take +3 momentum, and mark 2 ticks on your discoveries legacy track.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) to cobble together an ad hoc tool, device, or weapon, envision what you intend to create. On a hit, you may add +1 when making a move aided by the item. If you roll a 1 on your action die while using the item, it is permanently broken, lost, or depleted.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To cobble together an ad hoc tool, device, or weapon
                text: Envision what you intend to create.
                outcomes:
                  strong_hit: &Scavenger.2
                    text: You may add +1 when making a move aided by the item. If you roll a 1 on your action die while using the item, it is permanently broken, lost, or depleted.
                  weak_hit: *Scavenger.2
          - text: |-
              When you [Check Your Gear](id:starforged/moves/adventure/check_your_gear), roll +wits or +supply (whichever is highest) and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/check_your_gear
                move_type: action_roll
                trigger:
                  conditions:
                    - method: highest
                      roll_options:
                        - using: wits
                        - using: supply
                outcomes: *outcomes:+1_momentum.HIT
      scoundrel:
        asset_type: Path
        name: Scoundrel
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you make a move by lying, bluffing, stealing, or cheating, add +2. On a strong hit with a match, your deception creates an unexpected opportunity; take the value of your shadow as +momentum.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: By lying, bluffing, stealing, or cheating
                text: Add +2.
                outcomes:
                  strong_hit:
                    match:
                      text: Your deception creates an unexpected opportunity; take the value of your shadow as +momentum.
          - text: |-
              When you [Make a Connection](id:starforged/moves/connection/make_a_connection) to search out a new contact, you may roll +shadow. If you do, reroll any dice on a miss and envision how your reputation or underworld contacts lead you to a disreputable connection.
            augment_moves:
              - augments:
                  - starforged/moves/connection/make_a_connection
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To search out a new contact
                      method: any
                      roll_options:
                        - using: shadow
                outcomes:
                  strong_hit: &Scoundrel.2.Hit
                    text: &Scoundrel.2 Envision how your reputation or underworld contacts lead you to a disreputable connection.
                  weak_hit: *Scoundrel.2.Hit
                  miss:
                    text: *Scoundrel.2
                    reroll: *reroll:any
          - text: |-
              When you make a quick escape or con your way out of a situation and burn momentum to gain a strong hit, take +1 momentum after you reset. If you envision how this momentary success leaves you fated for future trouble, mark 2 ticks on your quests legacy track.
            # augment_player:
            #   momentum:
            #     burn:
            #       - trigger:
            #           text: When you make a quick escape or con your way out of a situation and burn momentum to gain a strong hit
            #         outcomes: [strong_hit]
            #         effect:
            #           text: Take +1 momentum after you reset. If you envision how this momentary success leaves you fated for future trouble, mark 2 ticks on your quests legacy track.

            # TODO: momentum burn trigger
      seer:
        asset_type: Path
        name: Seer
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you envision experiencing a prophetic dream, you may [Ask the Oracle](id:starforged/moves/fate/ask_the_oracle) for details using an interpretive oracle such as Action/Theme or Descriptor/Focus. If you record the answer, and later face a situation which gives truth to the vision, take an automatic strong hit (one time only) when making a move to act on your foresight. Then, clear the prophecy. Only one prophecy can be active at a time.
            enabled: true
            # TODO: as move?
          - text: |-
              When you focus or meditate to [Gather Information](id:starforged/moves/adventure/gather_information) about a place, being, or situation (in person or remotely), roll +spirit and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you focus or meditate to [Gather Information](id:starforged/moves/adventure/gather_information) about a place, being, or situation (in person or remotely)
                      method: any
                      roll_options:
                        - using: spirit
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you or an ally roll a match as you [Sojourn](id:starforged/moves/recover/sojourn) in a community or [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) within a site, you may envision gaining sudden and unbidden insight about the location. If you do, take +2 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Within a site
                      by:
                        player: true
                        ally: true
                outcomes: &Seer.3
                  strong_hit: &Seer.3.Match
                    match:
                      text: You may envision gaining sudden and unbidden insight about the location. If you do, take +2 momentum.
                  miss: *Seer.3.Match
              - augments:
                  - starforged/moves/recover/sojourn
                move_type: action_roll
                trigger:
                  conditions:
                    - by:
                        player: true
                        ally: true
                outcomes: *Seer.3
      shade:
        asset_type: Path
        name: Shade
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              Drawing on esoteric energies, you may instantly cloak your form in the shadowy veil of the void. When you are veiled and make a move to ambush, hide, or sneak, you may preset your action die to 5. In darkness, make it 6. On a miss, in addition to any other cost, you are revealed and can’t veil yourself again until the current situation is resolved.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you are veiled and make a move to ambush, hide, or sneak (not in darkness)
                # Preset:
                #   - die: Action die
                #     value: 5
                text: You may preset your action die to 5.
                outcomes: &Shade.1
                  miss:
                    text: In addition to any other cost, you are revealed and can’t veil yourself again until the current situation is resolved.
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you are veiled and make a move to ambush, hide, or sneak (in darkness)
                # Preset:
                #   - die: Action die
                #     value: 6
                text: You may preset your action die to 6.
                outcomes: *Shade.1
          - text: &move:Asset.Shade |-
              When you expand your veil to immerse your surroundings in darkness, roll +shadow. On a strong hit, the darkness extends to all adjacent spaces. On a weak hit, only your immediate surroundings are made dark. On a miss, you fail and draw unwanted attention.
            moves:
              shroud_in_darkness:
                name: Shroud in Darkness
                move_type: action_roll
                trigger:
                  text: When you expand your veil to immerse your surroundings in darkness...
                  conditions:
                    - method: any
                      roll_options:
                        - using: shadow
                text: *move:Asset.Shade
                outcomes:
                  strong_hit:
                    text: The darkness extends to all adjacent spaces.
                  weak_hit:
                    text: Only your immediate surroundings are made dark.
                  miss:
                    text: You fail and draw unwanted attention.
          - text: |-
              When you intentionally drop your veil to reveal yourself for dramatic or surprising effect, foregoing its further use in this situation, take +2 momentum.
            # TODO: non move trigger?
      slayer:
        asset_type: Path
        name: Slayer
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you make a move to investigate, track, or stalk an inhuman foe, add +1 and take +1 momentum on a hit.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To investigate, track, or stalk an inhuman foe
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) (formidable or greater) to slay an inhuman foe in service to a community, reroll any dice. When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) and score a hit, also mark 2 ticks on your bonds legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: &Slayer.Vow To slay an inhuman foe in service to a community (formidable or greater)
                outcomes: *outcomes:reroll_any.ALL
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: *Slayer.Vow
                outcomes: *outcomes:bonds_2_ticks_on_hit
          - text: |-
              When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) with an objective to slay an inhuman foe, take +2 momentum. If you choose to face the creature on its own terms as you begin the fight, envision the crucial weapon, protection, or aid you set aside, and set the objective one rank higher. If you [Take Decisive Action](id:starforged/moves/combat/take_decisive_action) after making this sacrifice and score a strong hit, take a trophy of your victory and mark 2 ticks on your quests legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: With an objective to slay an inhuman foe
                outcomes:
                  strong_hit: &Slayer.3.text
                    text: Take +2 momentum. If you choose to face the creature on its own terms as you begin the fight, envision the crucial weapon, protection, or aid you set aside, and set the objective one rank higher. If you [Take Decisive Action](id:starforged/moves/combat/take_decisive_action) after making this sacrifice and score a strong hit, take a trophy of your victory and mark 2 ticks on your quests legacy track.
                  weak_hit: *Slayer.3.text
                  miss: *Slayer.3.text
      sleuth:
        asset_type: Path
        name: Sleuth
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: &Sleuth.1 |-
              When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) to solve a murder, disappearance, theft, or other mystery, make the rank of the quest no greater than formidable. Then, when you [Gather Information](id:starforged/moves/adventure/gather_information) in the course of the investigation, roll three challenge dice and choose two. If any challenge dice match, you must use those values. On a miss with a match, envision what you learn of a deepening conspiracy or betrayal, make the rank of your quest one higher (no greater than epic), and use the new rank when marking future progress.
            enabled: true
            # TODO: some way of providing reminder text? hmm. the roll 3 dice but choose two (forced on a match) is interesting.
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To solve a murder, disappearance, theft, or other mystery (no greater than formidable)
                text: *Sleuth.1
          - text: |-
              When you make a move to avoid detection as you put a person or place under surveillance, add +1 and take +1 momentum on a hit.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To avoid detection as you put a person or place under surveillance
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you [Make a Connection](id:starforged/moves/connection/make_a_connection) with a potential informant, you may (instead of rolling) take an automatic weak hit.
            augment_moves:
              - augments:
                  - starforged/moves/connection/make_a_connection
                move_type: action_roll
                trigger:
                  conditions:
                    - text: With a potential informant
                      method: weak_hit
      sniper:
        asset_type: Path
        name: Sniper
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: If you wield a rifle...
        abilities:
          - text: &move:Asset.Sniper |-
              When you target a minor foe from a distance (outside of a fight), roll +wits. On a strong hit, they are out of action. If other foes remain and you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) against them, mark progress. On a weak hit, as above, but you sacrifice time or position; [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1). On a miss, you draw attention or face a reprisal; [Pay the Price](id:starforged/moves/fate/pay_the_price).
            enabled: true
            moves:
              snipe_minor_foe:
                name: Snipe Minor Foe
                move_type: action_roll
                trigger:
                  text: When you target a minor foe from a distance (outside of a fight)...
                  conditions:
                    - method: any
                      roll_options:
                        - using: wits
                text: *move:Asset.Sniper
                outcomes:
                  strong_hit:
                    text: The foe is out of action. If other foes remain and you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) against them, mark progress.
                  weak_hit:
                    text: |-
                      The foe is out of action. However, you sacrifice time or position; [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1).

                      If other foes remain and you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) against them, mark progress.
                  miss:
                    text: You draw attention or face a reprisal; [Pay the Price](id:starforged/moves/fate/pay_the_price).
          - text: |-
              When you [Strike](id:starforged/moves/combat/strike) from a distance with time enough to line up your shot, you may roll +wits. If you do, mark progress on a strong hit.
            augment_moves:
              - augments:
                  - starforged/moves/combat/strike
                move_type: action_roll
                trigger:
                  conditions:
                    - text: From a distance with time enough to line up your shot
                      method: any
                      roll_options:
                        - using: wits
                outcomes:
                  strong_hit: *outcome:mark_progress
          - text: |-
              When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) by studying a distant situation through your rifle scope, or [Gain Ground](id:starforged/moves/combat/gain_ground) by taking careful aim, you may sacrifice time for greater certainty. If you do (decide before rolling), [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1, -2, or -3) and add that amount. Then, take +1 momentum on a strong hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By studying a distant situation through your rifle scope
                text: &Sniper.3 You may sacrifice time for greater certainty. If you do (decide before rolling), [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1, -2, or -3) and add that amount.
                outcomes: &Sniper.3.Outcomes
                  strong_hit: *outcome:+1_momentum
              - augments:
                  - starforged/moves/adventure/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By taking careful aim
                text: *Sniper.3
                outcomes: *Sniper.3.Outcomes
      tech:
        asset_type: Path
        name: Tech
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you make a move to configure, optimize, hack, or disrupt an electronic system, add +1. On a weak hit, you can choose to press your luck. If you do, reroll all dice and add +2 (instead of +1).
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To configure, optimize, hack, or disrupt an electronic system
                text: Add +1.
                outcomes:
                  weak_hit:
                    reroll:
                      text: You can choose to press your luck. If you do, reroll all dice and add +2 (instead of +1).
                      method: all
                  # TODO: outcome-specific reroll
          - text: |-
              When you [Withstand Damage](id:starforged/moves/suffer/withstand_damage) and score a miss, you may attempt to reroute power or reboot critical systems. If you do, first [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2). Then, reroll all dice, add +wits instead of +integrity, and count a weak hit as a miss.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/withstand_damage
                outcomes:
                  miss:
                    reroll:
                      method: all
                      text: You may attempt to reroute power or reboot critical systems. If you do, first [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2). Then, reroll all dice, add +wits instead of +integrity, and count a weak hit as a miss.
          - text: |-
              When you [Face Danger](id:starforged/moves/adventure/face_danger) or [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) by creating a computer program to perform a specific, complex function, add +2 and take +1 momentum on a hit. One time only, when you trigger the program to fulfill its purpose, reroll any dice.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By creating a computer program to perform a specific, complex function
                text: Add +2.
                outcomes:
                  strong_hit: &Tech.3
                    text: Take +1 momentum. One time only, when you trigger the program to fulfill its purpose, reroll any dice.
                  weak_hit: *Tech.3
      trader:
        asset_type: Path
        name: Trader
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you [Sojourn](id:starforged/moves/recover/sojourn) or [Compel](id:starforged/moves/adventure/compel), you may roll +supply. If you do, [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1).
            augment_moves:
              - augments:
                  - starforged/moves/recover/sojourn
                  - starforged/moves/adventure/compel
                move_type: action_roll
                trigger:
                  conditions:
                    - roll_options:
                        - using: supply
                      method: any
                outcomes:
                  strong_hit: &Trader.1
                    text: '[Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1).'
                  weak_hit: *Trader.1
                  miss: *Trader.1
            enabled: true
          - text: |-
              When you [Make a Connection](id:starforged/moves/connection/make_a_connection) with a merchant or supplier, add +1. When you [Resupply](id:starforged/moves/recover/resupply) by bartering with them, reroll your action die if its value is less than your supply. On a strong hit, take +1 momentum or +1 supply.
            augment_moves:
              - augments:
                  - starforged/moves/connection/make_a_connection
                move_type: action_roll
                trigger:
                  conditions:
                    - text: With a merchant or supplier
                text: Add +1.
              - augments:
                  - starforged/moves/recover/resupply
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By bartering with a merchant or supplier connection
                outcomes:
                  strong_hit:
                    text: Take +1 momentum or +1 supply.
                    reroll: &Trader.2
                      method: action_die
                      text: Reroll your action die if its value is less than your supply.
                  weak_hit:
                    reroll: *Trader.2
                  miss:
                    reroll: *Trader.2
          - text: |-
              When you or an ally [Sojourn](id:starforged/moves/recover/sojourn) and score a strong hit with a match, you have a chance to secure a unique item or valuable payload. Envision the nature of the opportunity and the obstacle you must overcome to acquire it. If you are successful, mark 2 ticks on your quests legacy track. One time only, you may use this acquisition to gain an automatic strong hit on any move where your resources are a factor.
            augment_moves:
              - augments:
                  - starforged/moves/recover/make_a_connection
                move_type: action_roll
                trigger:
                  conditions:
                    - by:
                        player: true
                        ally: true
                outcomes:
                  strong_hit:
                    match:
                      text: You have a chance to secure a unique item or valuable payload. Envision the nature of the opportunity and the obstacle you must overcome to acquire it. If you are successful, mark 2 ticks on your quests legacy track. One time only, you may use this acquisition to gain an automatic strong hit on any move where your resources are a factor.
      vestige:
        asset_type: Path
        name: Vestige
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          last_of:
            label: Last of
            field_type: text
        abilities:
          - text: |-
              You are all that remains of a people, culture, or tradition. When you [Face Death](id:starforged/moves/threshold/face_death) or [Face Desolation](id:starforged/moves/threshold/face_desolation), visions of your heritage give you the strength to carry on. Envision how this manifests, and reroll any dice. On a strong hit with a match, a surprising new aspect of your heritage is revealed; take +2 momentum and mark 2 ticks on your bonds legacy track.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/threshold/face_death
                  - starforged/moves/threshold/face_desolation
                outcomes:
                  strong_hit:
                    match:
                      text: A surprising new aspect of your heritage is revealed; take +2 momentum and mark 2 ticks on your bonds legacy track.
                    reroll: &Vestige.1.Reroll
                      text: Visions of your heritage give you the strength to carry on. Envision how this manifests, and reroll any dice.
                      method: any
                  weak_hit: &Vestige.1
                    reroll: *Vestige.1.Reroll
                  miss: *Vestige.1
          - text: |-
              When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) or [Compel](id:starforged/moves/adventure/compel) through a tale, performance, or ceremony, envision what you reveal of your heritage. Then, add +1 and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                  - starforged/moves/adventure/compel
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Through a tale, performance, or ceremony
                text: Envision what you reveal of your heritage. Then, add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              You carry a physical relic of your heritage. Envision its powers or nature. When you make a move directly aided by the relic and score a miss, you may reroll your action die.
            options:
              relic:
                label: Relic
                field_type: text
                # position: ability_2_bottom
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you make a move directly aided by the relic
                outcomes:
                  miss:
                    reroll:
                      method: action_die
                      # default text: "You may reroll your action die."
      veteran:
        asset_type: Path
        name: Veteran
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              When you are in a fight, increase your momentum reset by 1. Then, if you burn momentum to improve your result, add +1 on your next move.
            enabled: true
            # augment_player:
            #   momentum:
            #     reset:
            #       - trigger:
            #           text: When you are in a fight
            #         value: 1
            #     burn:
            #       - trigger:
            #           text: When you are in a fight
            #         effect:
            #           text: Add +1 on your next move
          - text: |-
              When you [Make a Connection](id:starforged/moves/connection/make_a_connection), add +1. If you roll a match, you have a history.

                * On a strong hit with a match, you once fought beside them, and they owe you a favor. Mark 1 tick on your bonds legacy track, and [Develop Your Relationship](id:starforged/moves/connection/develop_your_relationship) now.
                * On a miss with a match, you once fought against them, and they hold a grudge.
            augment_moves:
              - augments:
                  - starforged/moves/connection/make_a_connection
                text: Add +1.
                outcomes:
                  strong_hit:
                    match:
                      text: |-
                        you_have_a_history: you once fought beside them, and they owe you a favor. Mark 1 tick on your bonds legacy track, and [Develop Your Relationship](id:starforged/moves/connection/develop_your_relationship) now.
                  miss:
                    match:
                      text: 'You have a history: You once fought against them, and they hold a grudge.'
          - text: |-
              When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) or [Gain Ground](id:starforged/moves/combat/gain_ground) by recounting or recalling a hard-won lesson from your battlefield experiences, envision the memory and add +1. On a hit, take +1 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By recounting or recalling a hard-won lesson from your battlefield experiences
                text: Envision the memory and add +1.
                outcomes: *outcomes:+1_momentum.HIT
      voidborn:
        asset_type: Path
        name: Voidborn
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              You are most suited to life in the limitless void. When you are in space (or a spacebound vehicle or station), increase your momentum reset by 1. When you enter a planetside or high gravity environment, [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1).
            enabled: true
            # TODO: revisit this for expansion
            # Triggers: # this is for triggers that aren't really moves, but that still might benefit from enumeration
            #   - trigger:
            #       text: When you enter a planetside or high gravity environment
            #     effect:
            #       text: "[Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1)."
            # augment_player:
            #   momentum:
            #     reset:
            #       - trigger:
            #           text: When you are in space (or a spacebound vehicle or station)
            #         value: 1
          - text: |-
              When you [Sojourn](id:starforged/moves/recover/sojourn) or [Make a Connection](id:starforged/moves/connection/make_a_connection) within a spacebound community, add +1. If you [Hearten](id:starforged/moves/recover/hearten) there and score a strong hit, take +1 spirit or +1 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/recover/sojourn
                  - starforged/moves/connection/make_a_connection
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Within a spacebound community
                text: Add +1.
              - augments:
                  - starforged/moves/recover/hearten
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Within a spacebound community
                outcomes:
                  strong_hit:
                    text: Take +1 spirit or +1 momentum.
          - text: |-
              When you make a move to perform an agile physical maneuver (such as leaping or evading) in a low gravity environment, add +1 and take +1 momentum on a hit. On a strong hit with a match, you build speed or put yourself in perfect position; take another +1 momentum.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To perform an agile physical maneuver (such as leaping or evading) in a low gravity environment
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: You build speed or put yourself in perfect position; take +2 momentum.
      weapon_master:
        asset_type: Path
        name: Weapon Master
        _source:
          title: 'Ironsworn: Starforged Assets'
        abilities:
          - text: |-
              You are a walking armory, with a weapon for every occasion. When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) in personal combat, add +1 and take +1 momentum on a hit. Once per fight, when you [Gain Ground](id:starforged/moves/combat/gain_ground) by switching weapons or changing tactics, take an automatic strong hit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In personal combat
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
              - augments:
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By switching weapons or changing tactics in personal combat (once per fight)
                      method: strong_hit
          - text: |-
              When you [Strike](id:starforged/moves/combat/strike) using a personal weapon which has limited ammo or a single-use mode, add +1 and mark progress on a hit. Then, [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1). If you score a strong hit on this attack and immediately [Take Decisive Action](id:starforged/moves/combat/take_decisive_action), you may retain the value of one challenge die from your [Strike](id:starforged/moves/combat/strike) action instead of rolling that die.
            augment_moves:
              - augments:
                  - starforged/moves/combat/strike
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Using a personal weapon which has limited ammo or a single-use mode
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Mark progress, then [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1). If you immediately [Take Decisive Action](id:starforged/moves/combat/take_decisive_action), you may retain the value of one challenge die from your [Strike](id:starforged/moves/combat/strike) action instead of rolling that die.
                  weak_hit:
                    text: Mark progress, then [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1).
                  miss:
                    text: '[Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1).'
          - text: |-
              When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) by suiting up and gathering your gear for a perilous encounter or mission, you may roll +supply. If you do, take +2 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By suiting up and gathering your gear for a perilous encounter or mission
                      method: any
                      roll_options:
                        - using: supply
                outcomes: *outcomes:+2_momentum.HIT
  companion:
    _source:
      page: 57
    name: Companion Assets
    color: '#3d8b8a'
    # Summary: NPC helpers, including alien creatures and robots.
    description: |-
      **Companions** are NPC helpers. When you gain a companion, give them a name and envision their look and personality.

      Companions utilize a health meter that can be reduced if an outcome puts them in harm's way. When your companion faces harm, make the [Companion Takes a Hit](id:starforged/moves/suffer/companion_takes_a_hit) move. When their health is at 0, they are in danger of being killed or destroyed.
    contents:
      banshee:
        asset_type: Companion
        name: Banshee
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [biological_companion]

        options:
          name: *TextField.Name
        condition_meter:
          label: health
          # aliases:
          #   - companion_health
          max: 4
          min: 0
          value: 4
          moves: &CompanionBiological.Moves
            suffer: &Companion.SufferMove starforged/moves/suffer/companion_takes_a_hit
            recover: starforged/moves/recover/heal
          controls:
            out_of_action: &Companion.OutOfAction
              label: Out of action
              field_type: checkbox
              disables_asset: true
        abilities:
          - text: |-
              Your banshee companion accompanies you on planetside missions, using its echolocation to help guide the way. When you ride your banshee as you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) or [Set a Course](id:starforged/moves/exploration/set_a_course), you may roll +its health.
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                  - starforged/moves/exploration/set_a_course
                move_type: action_roll
                trigger:
                  conditions:
                    - text: While riding your banshee
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/banshee/condition_meter
            enabled: true
          - text: |-
              When you make a move astride the banshee to detect a threat or avoid a fight, add +1 and take +1 momentum on a hit. On a strong hit with a match, you're gone in a flash; take another +1 momentum.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: To detect a threat or avoid a fight (while astride your banshee)
                text: Add +1.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: You're gone in a flash; take +2 momentum.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              When you make a combat move and roll a 1 on your action die, the banshee senses the danger and emits a powerful scream to alert you or distract your foes. You may reroll that die.
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                  - starforged/moves/combat/gain_ground
                  - starforged/moves/combat/react_under_fire
                  - starforged/moves/combat/strike
                  - starforged/moves/combat/clash
                  - starforged/moves/combat/battle
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When aided by your banshee
                outcomes:
                  strong_hit: &Banshee.3
                    reroll:
                      method: action_die
                      text: If you roll a 1 on your action die, the banshee senses the danger and emits a powerful scream to alert you or distract your foes. You may reroll that die.
                  weak_hit: *Banshee.3
                  miss: *Banshee.3
      combat_bot:
        asset_type: Companion
        name: Combat Bot
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [mechanical_companion]

        options:
          name: *TextField.Name
        condition_meter:
          label: health
          max: 5
          min: 0
          value: 5
          moves: &CompanionMechanical.Moves
            suffer: *Companion.SufferMove
            recover: starforged/moves/recover/repair
          controls:
            out_of_action: *Companion.OutOfAction
        abilities:
          - text: |-
              Your combat bot companion fights at your side. When you [Strike](id:starforged/moves/combat/strike) aided by the bot, add +1; if you [Clash](id:starforged/moves/combat/clash), take +1 momentum on a hit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/combat/strike
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Aided by your combat bot
                text: Add +1.
              - augments:
                  - starforged/moves/combat/clash
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Aided by your combat bot
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you use the threat of violence to [Compel](id:starforged/moves/adventure/compel) or [Gain Ground](id:starforged/moves/combat/gain_ground) while the bot brings its weapons to bear, you may roll +its health. If you do, take +1 momentum on a hit. On a strong hit with a match, the bot's display is especially persuasive; take another +1 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/compel
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Using the threat of violence while the bot brings its weapons to bear
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/combat_bot/condition_meter
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: The bot's display is especially persuasive; take +2 momentum.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              Once per fight, when you [React Under Fire](id:starforged/moves/combat/react_under_fire) by using the bot to draw fire or create a diversion, roll +its health. On a strong hit, mark progress. On a weak hit, face the cost as normal, but then you are in control.
            augment_moves:
              - augments:
                  - starforged/moves/combat/react_under_fire
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Once per fight, by using the combat bot to draw fire or create a diversion
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/combat_bot/condition_meter
                outcomes:
                  strong_hit: *outcome:mark_progress
                  weak_hit:
                    text: Face the cost as normal, but then you are in control.
                    # TODO: add "in control" override property to interface
                    # in_control: true
      glowcat:
        asset_type: Companion
        name: Glowcat
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [biological_companion]

        options:
          name: *TextField.Name
        condition_meter:
          label: health
          max: 3
          min: 0
          value: 3
          moves: *CompanionBiological.Moves
          controls:
            out_of_action: *Companion.OutOfAction
        abilities:
          - text: |-
              Your glowcat companion perceives the inner emotions and intentions of people and creatures in its vicinity, and embodies those impressions through the colors and intensity of its luminescent fur. When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) by studying the glowcat’s reactions in a charged interaction, add +its health.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By studying your glowcat’s reactions in a charged interaction
                text: Add +your glowcat's health.
          - text: |-
              When you [Compel](id:starforged/moves/adventure/compel), the glowcat’s reactions will help guide your approach; you may reroll your action die if its value is less than the glowcat’s health.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/compel
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When your glowcat’s reactions help guide your approach
                outcomes:
                  strong_hit: &Glowcat.2
                    reroll:
                      method: action_die
                      text: You may reroll your action die if its value is less than the glowcat’s health.
                  weak_hit: *Glowcat.2
                  miss: *Glowcat.2
          - text: |-
              When you [Endure Stress](id:starforged/moves/suffer/endure_stress) in the company of the glowcat, add +1. On a strong hit with a match, take +momentum equal to their health.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/endure_stress
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In the company of the glowcat
                text: Add +1.
                outcomes:
                  strong_hit:
                    match:
                      text: Take +momentum equal to the glowcat's health.
      protocol_bot:
        asset_type: Companion
        name: Protocol Bot
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [mechanical_companion]

        options:
          name: *TextField.Name
        condition_meter:
          label: health
          max: 3
          min: 0
          value: 3
          moves: *CompanionMechanical.Moves
          controls:
            out_of_action: *Companion.OutOfAction
        abilities:
          - text: |-
              Your protocol bot companion is programmed with knowledge of cultures, languages, and customs. When you are aided by the bot as you make a move in a formal social interaction, add +1. On a strong hit with a match, you learn something which builds understanding or empathy; also mark 1 tick on your bonds legacy track.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: When you are aided by the bot as you make a move in a formal social interaction
                text: Add +1.
                outcomes:
                  strong_hit:
                    match:
                      text: You learn something which builds understanding or empathy. Mark 1 tick on your bonds legacy track.
          - text: |-
              When you first visit or interact with a new community or culture, you may ask for the bot's insight. If you do, envision what you learn and take +1 momentum.
            # TODO: non-move trigger
            # When you first visit or interact with a new community or culture
          - text: |-
              If you make a move in a charged interaction and the value of your action die is less than the bot's health, you may reroll it as the bot interjects with their commentary or advice.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: In a charged interaction
                outcomes:
                  strong_hit: &Protocol_Bot.3
                    reroll:
                      method: action_die
                      text: If the value of your action die is less than the bot's health, you may reroll it as the bot interjects with their commentary or advice.
                  weak_hit: *Protocol_Bot.3
                  miss: *Protocol_Bot.3
      rockhorn:
        asset_type: Companion
        name: Rockhorn
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [biological_companion]

        options:
          name: *TextField.Name
        condition_meter:
          label: health
          max: 5
          min: 0
          value: 5
          moves: *CompanionBiological.Moves
          controls:
            out_of_action: *Companion.OutOfAction
        abilities:
          - text: |-
              Your rockhorn companion uses its resilient, stone-like hide and brute strength to overcome threats. When you make a move by sending the rockhorn to directly attack a foe or smash an obstacle, roll +its health.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: By sending the rockhorn to directly attack a foe or smash an obstacle
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/rockhorn/condition_meter
            enabled: true
          - text: |-
              When you make the [Companion Takes a Hit](id:starforged/moves/suffer/companion_takes_a_hit) move for the rockhorn, count a weak hit as a strong hit. On a strong hit with a match, its rapid healing makes it unstoppable; give it another +1 health or take +1 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/companion_takes_a_hit
                move_type: action_roll
                trigger:
                  conditions:
                    - text: For the rockhorn
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/rockhorn/condition_meter
                outcomes:
                  strong_hit:
                    match:
                      text: The rockhorn's rapid healing makes it unstoppable; give it another +1 health or take +1 momentum.
                  weak_hit:
                    count_as: strong_hit
          - text: |-
              The rockhorn will come to your aid in your most vulnerable moments. When you [Endure Harm](id:starforged/moves/suffer/endure_harm) or [Endure Stress](id:starforged/moves/suffer/endure_stress) and score a miss, you may reroll your action die if its value is less than the rockhorn’s health.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/endure_harm
                  - starforged/moves/suffer/endure_stress
                # Trigger:
                #   options:
                #     - text: Aided by your rockhorn
                #       method: null
                outcomes:
                  miss:
                    reroll:
                      method: action_die
                      text: You may reroll your action die if its value is less than the rockhorn’s health.

      sidekick:
        asset_type: Companion
        name: Sidekick
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [biological_companion]
        options:
          name:
            label: Name
            field_type: text
          expertise:
            label: Expertise
            field_type: text
        condition_meter:
          label: health
          max: 4
          min: 0
          value: 4
          moves: *CompanionBiological.Moves
          controls:
            out_of_action: *Companion.OutOfAction
        abilities:
          - text: |-
              Your sidekick has a helpful expertise. When you make a move outside of a fight directly aided by their expertise, you may reroll your action die if its value is less than your sidekick's health. If you then score a strong hit with a match, mark 1 tick on your bonds legacy track.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: Directly aided by your sidekick's expertise (outside of a fight)
                outcomes:
                  strong_hit: &Sidekick.1
                    reroll:
                      method: action_die
                      text: You may reroll your action die if its value is less than your sidekick's health. If you then score a strong hit with a match, mark 1 tick on your bonds legacy track.
                  weak_hit: *Sidekick.1
                  miss: *Sidekick.1
          - text: |-
              When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) with the support of your sidekick, take +2 momentum on a hit. When you [Clash](id:starforged/moves/combat/clash) together, add +1.
            augment_moves:
              - augments:
                  - starforged/moves/combat/enter_the_fray
                move_type: action_roll
                trigger:
                  conditions:
                    - text: With the support of your sidekick
                outcomes: *outcomes:+2_momentum.HIT
              - augments:
                  - starforged/moves/combat/clash
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Together with your sidekick
                text: Add +1.
          - text: |-
              When your sidekick acts to get you out of a tough spot, you may [Face Danger](id:starforged/moves/adventure/face_danger) or [React Under Fire](id:starforged/moves/combat/react_under_fire) and roll +their health (instead of your own stat). On a hit, take +1 momentum.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                  - starforged/moves/combat/react_under_fire
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Your sidekick acts to get you out of a tough spot
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/sidekick/condition_meter
                outcomes: *outcomes:+1_momentum.HIT

      sprite:
        asset_type: Companion
        name: Sprite
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [biological_companion]

        options:
          name: *TextField.Name
        condition_meter:
          label: health
          max: 2
          min: 0
          value: 2
          moves: *CompanionBiological.Moves
          controls:
            out_of_action: *Companion.OutOfAction
        abilities:
          - text: |-
              Your sprite companion alters its delicate, crystalline form to fly, swim, or scurry, and can covertly navigate even the harshest of environments. When you make a move by sending it to perform trickery (such as creating a distraction, sneaking into a protected location, or stealing an object) add +its health.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: By sending your sprite to perform trickery (such as creating a distraction, sneaking into a protected location, or stealing an object)
                text: Add +your sprite's health.
          - text: |-
              You are attuned to the resonance of the sprite's crystalline structure, and can communicate with it at a distance and perceive through its senses. When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) by observing a situation from its perspective, or remotely [Gather Information](id:starforged/moves/adventure/gather_information), add +its health.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By remotely observing a situation from your sprite's perspective
                text: Add +your sprite's health.
          - text: |-
              With a moment's rest, the sprite can mend its form and return automatically to max health.

      survey_bot:
        asset_type: Companion
        name: Survey Bot
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [mechanical_companion]
        options:
          name: *TextField.Name
        condition_meter:
          label: health
          max: 3
          value: 3
          min: 0
          moves: *CompanionMechanical.Moves
          controls:
            out_of_action: *Companion.OutOfAction
        abilities:
          - text: |-
              Your survey bot companion scans the path ahead. When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) (+wits) overland or within a site, add +1.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Overland or within a site (assisted by your survey bot)
                      roll_options:
                        - using: wits
                text: Add +1.
          - text: |-
              Once per expedition, when you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) by sending the bot to scout ahead, roll +its health. On a hit, also mark progress on the expedition. On a strong hit with a match, the bot uncovers an unexpected feature or location; envision what it reveals and mark 1 tick on your discoveries legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Once per expedition, by sending the survey bot to scout ahead
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/survey_bot/condition_meter
                outcomes:
                  strong_hit:
                    text: Mark progress on the expedition.
                    match:
                      text: Mark progress on the expedition. The bot uncovers an unexpected feature or location; envision what it reveals and mark 1 tick on your discoveries legacy track.
                  weak_hit:
                    text: Mark progress on the expedition.
          - text: |-
              When you [Explore a Waypoint](id:starforged/moves/exploration/explore_a_waypoint) aided by the bot's sensors, or [Face Danger](id:starforged/moves/adventure/face_danger) to detect a threat, roll +its health and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/exploration/explore_a_waypoint
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Aided by the survey bot's sensors
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/survey_bot/condition_meter
                outcomes: *outcomes:+1_momentum.HIT
              - augments:
                  - starforged/moves/adventure/face_danger
                  - starforged/moves/scene_challenge/face_danger
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To detect a threat
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/survey_bot/condition_meter
                outcomes: *outcomes:+1_momentum.HIT
      symbiote:
        asset_type: Companion
        name: Symbiote
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [biological_companion]

        options:
          name: *TextField.Name
        condition_meter:
          label: health
          max: 2
          min: 0
          value: 2
          moves: *CompanionBiological.Moves
          controls:
            out_of_action: *Companion.OutOfAction
        abilities:
          - text: |-
              You are physically bound to a being with 2 health. When you make aggressive moves while giving yourself to the symbiote's power, add +its health. If you face physical harm, choose either the [Endure Harm](id:starforged/moves/suffer/endure_harm) or [Companion Takes a Hit](id:starforged/moves/suffer/companion_takes_a_hit) move. To restore the symbiote's health, you must [Endure Stress](id:starforged/moves/suffer/endure_stress) and give the symbiote +health equal to the -spirit you face. If you make a move aided by the symbiote and roll a 1 on your action die, your fragile bond is broken for several hours.
            enabled: true
            # TODO: move to restore symbiote health?
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: Make an aggressive move while giving yourself to the symbiote's power
                text: Add +your symbiote's health. If you make a move aided by the symbiote and roll a 1 on your action die, your fragile bond is broken for several hours.
          - text: |-
              When you make a move and heed the symbiote's guidance (decide after rolling), you may reroll any dice. Then, [Endure Stress](id:starforged/moves/suffer/endure_stress) (-2).
            augment_moves:
              - outcomes:
                  strong_hit: &Symbiote.2
                    reroll:
                      method: any
                      text: When you make a move and heed the symbiote's guidance (decide after rolling), you may reroll any dice. Then, [Endure Stress](id:starforged/moves/suffer/endure_stress) (-2).
                  weak_hit: *Symbiote.2
                  miss: *Symbiote.2
          - text: |-
              The symbiote gains power and has 3 health.
            augment_asset:
              condition_meter:
                max: 3

      utility_bot:
        asset_type: Companion
        name: Utility Bot
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [mechanical_companion]
        options:
          name: *TextField.Name
        condition_meter:
          label: health
          max: 4
          value: 4
          min: 0
          moves: *CompanionMechanical.Moves
          controls:
            out_of_action: *Companion.OutOfAction
        abilities:
          - text: |-
              Your utility bot companion has helpful tools at-hand. When you make a move by directing it to access a system, cut through an obstacle, analyze a mechanical issue, or assemble or disassemble a device, roll +its health and take +1 momentum on a hit. On a strong hit with a match, it reveals an unexpected advantage or insight; take another +1 momentum.
            enabled: true
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: By directing the utility bot to access a system, cut through an obstacle, analyze a mechanical issue, or assemble or disassemble a device
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/utility_bot/condition_meter
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: The utility bot reveals an unexpected advantage or insight. Take +2 momentum.
                  weak_hit: *outcome:+1_momentum
          - text: |-
              When you [Repair](id:starforged/moves/recover/repair) aided by the bot, add +1. On a miss, it reveals an alternative approach which will take extra time; you may reroll any dice, but first [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2).
            augment_moves:
              - augments:
                  - starforged/moves/recover/repair
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Aided by the bot
                text: Add +1.
                # TODO: outcome specific reroll interface?
                outcomes:
                  miss:
                    reroll:
                      text: The bot reveals an alternative approach which will take extra time; you may reroll any dice, but first [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-2).
                      method: any
          - text: |-
              When you [Check Your Gear](id:starforged/moves/adventure/check_your_gear) to see if the bot has a specific tool or technique available, roll +its health and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/check_your_gear
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To see if your utility bot has a specific tool or technique available
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/utility_bot/condition_meter
                outcomes: *outcomes:+1_momentum.HIT

      voidglider:
        asset_type: Companion
        name: Voidglider
        _source:
          title: 'Ironsworn: Starforged Assets'
        # tags: [biological_companion]

        options:
          name: *TextField.Name
        condition_meter:
          label: health
          min: 0
          max: 4
          value: 4
          moves: *CompanionBiological.Moves
          controls:
            out_of_action: *Companion.OutOfAction
        abilities:
          - text: |-
              Your voidglider companion cruises in your starship’s energy wake and can help guide the way on spaceborne journeys. When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition), add +1.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/exploration/undertake_an_expedition
                move_type: action_roll
                trigger:
                  conditions:
                    - text: On a spaceborne journey as your voidglider helps guide the way
                text: Add +1.
          - text: |-
              The voidglider is harnessed and trained as a mount, and can be ridden for short-range spacebound transport. When you are riding the voidglider and make a move to detect or evade a threat by relying on its instincts, roll +its health.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: You are riding the voidglider and make a move to detect or evade a threat by relying on its instincts
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/voidglider/condition_meter
          - text: |-
              When you make a move by signaling the voidglider to distract or attack a spaceborne foe, roll +its health and take +1 momentum on a hit.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - text: You make a move by signaling the voidglider to distract or attack a spaceborne foe
                      method: any
                      roll_options:
                        - using: ref
                          ref: starforged/assets/companion/voidglider/condition_meter
                outcomes: *outcomes:+1_momentum.HIT
  deed:
    _source:
      page: 57
    name: Deed Assets
    color: '#40834f'
    # Summary: Represent the notable achievement and situations of your story, and how those events change your character.
    description: |-
      **Deeds** represent the notable achievement and situations of your story, and how those events change your character.

      Deeds have a requirement listed at the top of the card, phrased as “Once you \[blank\].” You may not spend experience to acquire a deed until you fulfill the requirement, and you cannot choose a deed when creating your character.
    contents:
      bonded:
        asset_type: Deed
        name: Bonded
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          bond_mate:
            label: Bond-mate
            field_type: text
        requirement: One time only, once you [Forge a Bond](id:starforged/moves/connection/forge_a_bond) with a special individual...
        abilities:
          - text: |-
              This person is your bond-mate. When you [Sojourn](id:starforged/moves/recover/sojourn) at their home, [Hearten](id:starforged/moves/recover/hearten) in their presence, or [Test Your Relationship](id:starforged/moves/connection/test_your_relationship) or [Develop Your Relationship](id:starforged/moves/connection/develop_your_relationship) with them, reroll any dice. On a strong hit, take +1 momentum.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/recover/sojourn
                move_type: action_roll
                trigger:
                  conditions:
                    - text: At your bond-mate's home
                outcomes: &Bonded.1
                  strong_hit:
                    text: Take +1 momentum.
                    reroll: *reroll:any
                  weak_hit: *outcome:reroll_any
                  miss: *outcome:reroll_any
              - augments:
                  - starforged/moves/recover/hearten
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your bond-mate's presence
                outcomes: *Bonded.1
              - augments:
                  - starforged/moves/connection/test_your_relationship
                  - starforged/moves/connection/develop_your_relationship
                move_type: action_roll
                trigger:
                  conditions:
                    - text: With your bond-mate
                outcomes: *Bonded.1
          - text: |-
              When you [Set a Course](id:starforged/moves/exploration/set_a_course) back to your bond-mate's location, add +heart. On a strong hit with a match, envision a special reunion and mark two ticks on your bonds legacy track.
            augment_moves:
              - augments:
                  - starforged/moves/exploration/set_a_course
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Back to your bond-mate's location
                text: Add +heart.
                outcomes:
                  strong_hit:
                    match:
                      text: Envision a special reunion and mark two ticks on your bonds legacy track.
          - text: |-
              When you make a move in a crucial moment and score a miss, you may cling to thoughts of your bond-mate for support. If you do, reroll any dice. On another miss, in addition to the outcome of the move, you must mark shaken or traumatized. If both debilities are already marked, [Face Desolation](id:starforged/moves/threshold/face_desolation).
            augment_moves:
              - outcomes:
                  miss:
                    text: You may cling to thoughts of your bond-mate for support. If you do, reroll any dice. On another miss, in addition to the outcome of the move, you must mark shaken or traumatized. If both debilities are already marked, [Face Desolation](id:starforged/moves/threshold/face_desolation).
                    reroll: *reroll:any
      homesteader:
        asset_type: Deed
        name: Homesteader
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          name: *TextField.Name
        requirement: Once you fill 4 boxes on your bonds legacy track...
        abilities:
          - text: |-
              You have chosen or established a community as your home. When you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) (formidable or greater) in service to your home, reroll any dice. On a hit, mark 1 tick on your bonds legacy track. When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) and score a hit, also mark 2 ticks on your bonds legacy track.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In service to your home (formidable or greater)
                text: Add +1.
                outcomes:
                  strong_hit: &Homesteader.1.Hit
                    text: Mark 1 tick on your bonds legacy track.
                    reroll: *reroll:any
                  weak_hit: *Homesteader.1.Hit
                  miss: *outcome:reroll_any
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: In service to your home (formidable or greater)
                outcomes: *outcomes:bonds_2_ticks_on_hit
          - text: |-
              When you [Sojourn](id:starforged/moves/recover/sojourn) in your home, choose one.

                * Don't linger: Take an automatic weak hit
                * Stay a bit: Add +1 and take +1 momentum on a hit
            augment_moves:
              - augments:
                  - starforged/moves/recover/sojourn
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your home (and you don't linger)
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
              - augments:
                  - starforged/moves/recover/sojourn
                move_type: action_roll
                trigger:
                  conditions:
                    - text: In your home (and you stay a bit)
                      method: weak_hit
                text: Take an automatic weak hit.
          - text: |-
              When you [Set a Course](id:starforged/moves/exploration/set_a_course) for home, you may reroll your action die if its value is less than your spirit.
            augment_moves:
              - augments:
                  - starforged/moves/exploration/set_a_course
                move_type: action_roll
                trigger:
                  conditions:
                    - text: For home
                outcomes:
                  strong_hit: &Homesteader.3
                    reroll: *reroll:action_die<spirit
                  weak_hit: *Homesteader.3
                  miss: *Homesteader.3
      marked:
        asset_type: Deed
        name: Marked
        _source:
          title: 'Ironsworn: Starforged Assets'
        options:
          identifier:
            label: Identifier
            field_type: text
        requirement: Once you fill 5 boxes on your quests legacy track...
        abilities:
          - text: |-
              Envision the title, sigil, uniform, or tattoo you bear in recognition of your achievements. When you [Compel](id:starforged/moves/adventure/compel) or [Make a Connection](id:starforged/moves/connection/make_a_connection) among those who would know your reputation, add +1. On a strong hit with a match, your notoriety grows; mark 2 ticks on your bonds legacy track.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/adventure/compel
                  - starforged/moves/connection/make_a_connection
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Among those who would know your reputation
                text: Add +1.
                outcomes:
                  strong_hit:
                    match:
                      text: Your notoriety grows; mark 2 ticks on your bonds legacy track.
          - text: |-
              When you risk your reputation to overcome a miss, reroll any dice. If you score a miss again, fill one segment of a six-segment clock to represent the stain on your reputation. When the clock is filled, discard this asset.
            augment_moves:
              - outcomes:
                  miss:
                    text: When you risk your reputation to overcome a miss, reroll any dice. If you score a miss again, fill one segment of a six-segment clock to represent the stain on your reputation. When the clock is filled, discard this asset.
                    reroll: *reroll:any
            controls:
              clock:
                label: Stained reputation
                field_type: clock
                max: 6
                value: 0
                min: 0
                # position: ability_1_right
          - text: |-
              Once per fight, when you [Gain Ground](id:starforged/moves/combat/gain_ground) through intimidation or command, reroll any dice and mark progress on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/combat/gain_ground
                move_type: action_roll
                trigger:
                  conditions:
                    - text: Through intimidation or command (once per fight)
                outcomes:
                  strong_hit: &Marked.3
                    text: Mark progress.
                    reroll: *reroll:any
                  weak_hit: *Marked.3
                  miss: *outcome:reroll_any
      oathbreaker:
        asset_type: Deed
        name: Oathbreaker
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: Once you [Forsake Your Vow](id:starforged/moves/quest/forsake_your_vow)...
        # Impact: true # TODO: add asset details for this
        count_as_impact: true
        abilities:
          - text: |-
              This asset counts as an impact. One time only, when you [Swear an Iron Vow](id:starforged/moves/quest/swear_an_iron_vow) (extreme or greater) to redeem yourself, give that vow a special mark. When you [Reach a Milestone](id:starforged/moves/quest/reach_a_milestone) on the marked vow, take +2 momentum. If you [Forsake Your Vow](id:starforged/moves/quest/forsake_your_vow) on the quest, discard this asset and retain the impact.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/quest/swear_an_iron_vow
                move_type: action_roll
                trigger:
                  conditions:
                    - text: To redeem yourself (extreme or greater, one time only)
                text: Give this vow a special mark. When you [Reach a Milestone](id:starforged/moves/quest/reach_a_milestone) on the marked vow, take +2 momentum. If you [Forsake Your Vow](id:starforged/moves/quest/forsake_your_vow) on the quest, discard this asset and retain the impact.
              - augments:
                  - starforged/moves/quest/forsake_your_vow
                text: &Oathbreaker.1 If you [Forsake Your Vow](id:starforged/moves/quest/forsake_your_vow) on the quest, discard this asset and retain the impact.
          - text: |-
              When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) or [Compel](id:starforged/moves/adventure/compel) by reaffirming your commitment to your marked vow, add +1 and take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/secure_an_advantage
                  - starforged/moves/scene_challenge/secure_an_advantage
                  - starforged/moves/adventure/compel
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By reaffirming your commitment to your marked vow
                text: Add +1.
                outcomes: *outcomes:+1_momentum.HIT
          - text: |-
              When you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) on the marked quest and score a hit, you find redemption and automatically gain this ability at no cost. You may then improve one of your stats by +1 and discard this asset. Once the asset is discarded, you may not take it again.
            augment_moves:
              - augments:
                  - starforged/moves/quest/fulfill_your_vow
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: On your marked quest
                outcomes:
                  strong_hit: &Oathbreaker.3
                    text: You find redemption and automatically gain this ability at no cost. You may then improve one of your stats by +1 and discard this asset. Once the asset is discarded, you may not take it again.
                  weak_hit: *Oathbreaker.3
                  miss: # this is intentional, so that relevant reminder text is passed to the PC on a miss
                    text: *Oathbreaker.1
      revenant:
        asset_type: Deed
        name: Revenant
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: Once you [Face Death](id:starforged/moves/threshold/face_death)...
        abilities:
          - text: |-
              When you are at 0 health, and [Endure Harm](id:starforged/moves/suffer/endure_harm) or [Face Death](id:starforged/moves/threshold/face_death), add +1. You may then reroll your action die if its value is less than your spirit.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/suffer/endure_harm
                  - starforged/moves/threshold/face_death
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you are at 0 health
                text: Add +1.
                outcomes:
                  strong_hit: &Revenant.1
                    reroll: *reroll:action_die<spirit
                  weak_hit: *Revenant.1
                  miss: *Revenant.1
          - text: |-
              When you [Take Decisive Action](id:starforged/moves/combat/take_decisive_action) by bringing death to a foe, you may burn momentum to zero out one (not both) of the challenge dice if your momentum is greater than the value of that die. If you do, [Endure Stress](id:starforged/moves/suffer/endure_stress) (-2).
            augment_moves:
              - augments:
                  - starforged/moves/combat/take_decisive_action
                move_type: progress_roll
                trigger:
                  conditions:
                    - text: By bringing death to a foe
                outcomes:
                  strong_hit: &Revenant.2
                    text: You may burn momentum to zero out one (not both) of the challenge dice if your momentum is greater than the value of that die. If you do, [Endure Stress](id:starforged/moves/suffer/endure_stress) (-2).
                  weak_hit: *Revenant.2
                  miss: *Revenant.2
          - text: |-
              When you [Gather Information](id:starforged/moves/adventure/gather_information) by studying a place where death left its mark, you may roll +heart. If you do, take +1 momentum on a hit. On a strong hit with a match, you experience a detailed vision or insightful revelation of what occurred here; take +1 momentum more.
            augment_moves:
              - augments:
                  - starforged/moves/adventure/gather_information
                move_type: action_roll
                trigger:
                  conditions:
                    - text: By studying a place where death left its mark
                      roll_options:
                        - using: heart
                      method: any
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    match:
                      text: You experience a detailed vision or insightful revelation of what occurred here. Take +2 momentum.
                  weak_hit: *outcome:+1_momentum
      survivor:
        asset_type: Deed
        name: Survivor
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: Once you mark traumatized or permanently harmed...
        abilities:
          - text: |-
              When you are haunted by past experiences and must [Endure Stress](id:starforged/moves/suffer/endure_stress), you may [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1) before rolling as you attempt to find focus or calm. If you do, reroll any dice. On a strong hit, take +1 momentum.
            enabled: true
            augment_moves:
              - augments:
                  - starforged/moves/suffer/endure_stress
                move_type: action_roll
                trigger:
                  conditions:
                    - text: When you are haunted by past experiences
                text: You may [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1) before rolling as you attempt to find focus or calm. If you do, reroll any dice.
                outcomes:
                  strong_hit:
                    text: Take +1 momentum.
                    reroll: &Survivor.1
                      text: You may [Lose Momentum](id:starforged/moves/suffer/lose_momentum) (-1) before rolling as you attempt to find focus or calm. If you do, reroll any dice.
                      method: any
                  weak_hit:
                    reroll: *Survivor.1
                  miss:
                    reroll: *Survivor.1
          - text: |-
              When you make a move where a lasting effect (traumatized or permanently harmed) has a narrative impact on the scene or your approach, and burn momentum to improve your result, you may envision what sustains or motivates you in this moment. If you do, mark 1 tick on your quests or bonds legacy track. On a strong hit with a match, mark 2 ticks.
            # TODO: implement interface for alter momentum burn
            # augment_player:
            #   momentum:
            #     burn:
            #       - trigger:
            #           text: To improve the result of a move where a lasting effect (traumatized or permanently harmed) has a narrative impact on the scene or your approach
            #         effect:
            #           text: You may envision what sustains or motivates you in this moment. If you do, mark 1 tick on your quests or bonds legacy track. On a strong hit with a match, mark 2 ticks.
          - text: |-
              You are learning to live with this impact. The lasting effect (traumatized or permanently harmed, but not both) remains marked, but no longer reduces your max momentum or reset.
            # TODO: modify impacts interface?
      vanguard:
        asset_type: Deed
        name: Vanguard
        _source:
          title: 'Ironsworn: Starforged Assets'
        requirement: Once you fill 6 boxes on your discoveries legacy track...
        abilities:
          - text: &move:Asset.Vanguard |-
              When you seek a safe location in a remote environment, make a progress roll against your discoveries legacy track. On a strong hit, you establish a haven; add +2 whenever you make a recovery move at that location. On a weak hit, as above, but add +1 when making a recovery move. On a miss, you are drawn into a bad situation and must [Pay the Price](id:starforged/moves/fate/pay_the_price). If you establish a haven but score a miss on a recovery move, that location is no longer safe.
            enabled: true
            moves:
              seek_safe_haven:
                name: Seek Safe Haven
                move_type: progress_roll
                trigger:
                  text: When you seek a safe location in a remote environment...
                  conditions:
                    - method: any
                      roll_options:
                        - using: discoveries_legacy
                text: *move:Asset.Vanguard
                outcomes:
                  strong_hit:
                    text: |-
                      You establish a haven; add +2 whenever you make a recovery move at that location.

                      If you establish a haven but score a miss on a recovery move, that location is no longer safe.
                  weak_hit:
                    text: |-
                      You establish a haven; add +1 whenever you make a recovery move at that location.

                      If you establish a haven but score a miss on a recovery move, that location is no longer safe.
                  miss:
                    text: |-
                      You are drawn into a bad situation and must [Pay the Price](id:starforged/moves/fate/pay_the_price).
          - text: |-
              When you make a move +wits and score a strong hit with a match, your hard-won experience lends insight; take +1 momentum.
            augment_moves:
              - move_type: action_roll
                trigger:
                  conditions:
                    - roll_options:
                        - using: wits
                outcomes:
                  strong_hit:
                    match:
                      text: Your hard-won experience lends insight; take +1 momentum.
          - text: |-
              When you [Endure Stress](id:starforged/moves/suffer/endure_stress), you may roll +wits. If you do, take +1 momentum on a hit.
            augment_moves:
              - augments:
                  - starforged/moves/suffer/endure_stress
                move_type: action_roll
                trigger:
                  conditions:
                    - method: any
                      roll_options:
                        - using: wits
                outcomes: *outcomes:+1_momentum.HIT
