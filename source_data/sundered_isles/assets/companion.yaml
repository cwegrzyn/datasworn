_id: sundered_isles
datasworn_version: "0.1.0"
type: expansion
ruleset: starforged
<<: &Source
  date: 2024-06-01
  title: Sundered Isles
  url: https://ironswornrpg.com
  license: null
  authors:
  - name: Shawn Tomkin
assets:
  companion:
    name: Companion Assets
    type: asset_collection
    _source:
      <<: *Source
    contents:
      albatross:
        name: Albatross
        type: asset
        _source:
          <<: *Source
        category: Companion
        options: &NameField
          name:
            label: name
            field_type: text
        abilities:
        - enabled: true
          text: |-
            Your albatross companion brings good luck, but its fate is tied to your own. When you are at sea, increase your momentum reset by 1. If the albatross is killed, discard this asset and suffer a permanent impact.
        - text: |-
            When the albatross flies ahead of your ship or perches on the ship’s mast as you [Finish an Expedition](id:starforged/moves/exploration/finish_an_expedition), its luck is on your side. You may reroll one challenge die.
          enhance_moves:
          - enhances:
            - starforged/moves/exploration/finish_an_expedition
            roll_type: progress_roll
            trigger:
              conditions:
              - text: When the albatross flies ahead of your ship or perches on the ship’s mast as you [Finish an Expedition](id:starforged/moves/exploration/finish_an_expedition)
        - text: |-
            When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) at sea by asking the spirit embodied by the albatross for a favorable boon, you may roll +its health. If you do, take +1 momentum on a hit. On a strong hit with a match, also mark 1 tick on your bonds legacy track as you deepen your connection to your companion.
          enhance_moves:
          - enhances:
            - starforged/moves/*/secure_an_advantage
            roll_type: action_roll
            trigger:
              conditions:
              - text: at sea by asking the spirit embodied by the albatross for a favorable boon
                roll_options:
                - using: asset_control
                  assets: null
                  control: health
        controls:
          health:
            <<: &BiologicalCompanionHealth
              label: health
              min: 0
              field_type: condition_meter
              controls:
                out_of_action:
                  label: out of action
                  field_type: checkbox
                  disables_asset: true
              moves: &BiologicalCompanionHealth.moves
                suffer:
                  - starforged/moves/suffer/companion_takes_a_hit
                recover:
                  - starforged/moves/recover/heal
            max: 3
            value: 3
      chattering_skull:
        name: Chattering Skull
        type: asset
        options: *NameField
        _source:
          <<: *Source
        category: Companion
        abilities:
        - enabled: true
          text: |-
            This animate skull does not use a health meter, but is as vulnerable to destruction or loss as any object. When you make a move in its presence, add a cursed die (ten-sided) to the roll. If that die rolls a 10, you glean insight from the skull’s incessant chatter as follows.

              * If you rolled a miss, reroll all dice. If you miss again, the skull leads you astray.
              * If you rolled a hit, take +1 momentum and add +1 on your next related move.
          # TODO: is there a way to add a cursed die to this?

        - text: |-
            When you roll a match with a 10 on the cursed die, you learn a surprising or dreadful aspect of the skull’s history or nature; mark 1 box on your bonds legacy track.
        - text: |-
            Once per situation, when you make a move against a supernatural foe, obstacle, or mystery, you may use the value of the cursed die in place of your action die.
          enhance_moves:
          - roll_type: action_roll
            trigger:
              conditions:
              - text: Once per situation, when you make a move against a supernatural foe, obstacle, or mystery
      dolphin:
        name: Dolphin
        type: asset
        options: *NameField
        _source:
          <<: *Source
        category: Companion
        abilities:
        - enabled: true
          text: |-
            Your dolphin companion is a helpful but often errant friend. When you call the dolphin, roll +heart. On a hit, it appears and will remain in the area for an hour or two. You may (one time only) reroll any dice on a move to overcome an obstacle or hazard with its help. On a strong hit, also take +2 momentum. On a miss, it is away or unable to respond; [Pay the Price](id:starforged/moves/fate/pay_the_price).
          # TODO: new move
        - text: |-
            When you make a move to detect or evade a threat while swimming in the company of the dolphin, roll +its health and take +1 momentum on a hit.
          enhance_moves:
          - roll_type: action_roll
            trigger:
              conditions:
                - text: When you make a move to detect or evade a threat while swimming in the company of the dolphin
        - text: |-
            When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) and score a miss with a match, you may envision the dolphin appearing unbidden to guide you out of trouble. If you do, reroll both challenge dice.
          enhance_moves:
          - enhances:
            - starforged/moves/exploration/undertake_an_expedition
            roll_type: action_roll
        controls:
          health:
            <<: *BiologicalCompanionHealth
            max: 4
            value: 4
      dragon:
        name: Dragon
        type: asset
        options: *NameField
        _source:
          <<: *Source
        category: Companion
        abilities:
        - enabled: true
          text: |-
            Your dragon companion wards off trouble. When you [Secure an Advantage](id:starforged/moves/adventure/secure_an_advantage) by letting it roam, roll +its health. You must [Sacrifice Resources](id:starforged/moves/suffer/sacrifice_resources) (-1) about once a day to satiate its fierce appetite; otherwise, make the [Companion Takes a Hit](id:starforged/moves/suffer/companion_takes_a_hit) (-2) move.
          enhance_moves:
          - enhances:
            - starforged/moves/*/secure_an_advantage
            roll_type: action_roll
            trigger:
              conditions:
              - text: by letting your dragon roam
                roll_options:
                - using: asset_control
                  assets: null
                  control: health
        - text: |-
            The dragon accepts you as a rider. It flies under your direction, and assails your foes using tooth, tail, claw, and fiery breath. When you make a move from the saddle to lead an expedition or leverage the dragon as a weapon, you may roll +its health. If you then roll a 1 or 2 on your action die, the dragon must bear the brunt of any cost or counterattack.
        - text: |-
            When you make the [Companion Takes a Hit](id:starforged/moves/suffer/companion_takes_a_hit) move, take +1 momentum on a strong hit.
          enhance_moves:
          - enhances:
            - starforged/moves/suffer/companion_takes_a_hit
            roll_type: action_roll
            trigger:
              conditions:
              - roll_options:
                - using: asset_control
                  control: health
                  assets: null
        controls:
          health:
            <<: *BiologicalCompanionHealth
            max: 5
            value: 5
      jungle_cat:
        name: Jungle Cat
        type: asset
        options: *NameField
        _source:
          <<: *Source
        category: Companion
        abilities:
        - enabled: true
          text: |-
            Your jungle cat companion leaps into the fight at your side. When you [Strike](id:starforged/moves/combat/strike) aided by the cat, or if you make a move to intimidate your foes, add +1. If you [Clash](id:starforged/moves/combat/clash), take +1 momentum on a hit.
          enhance_moves:
          - enhances:
            - starforged/moves/combat/strike
            roll_type: action_roll
            trigger:
              conditions:
              - text: aided by the jungle cat
          - enhances: null
            roll_type: action_roll
            trigger:
              conditions:
                - text: make a move to intimidate your foes, aided by the jungle cat
          - enhances:
            - starforged/moves/combat/clash
            roll_type: action_roll
            trigger:
              conditions:
                - text: aided by the jungle cat
        - text: |-
            The jungle cat leads the way on treacherous overland journeys. When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) through wilderness, add +1. On a strong hit with a match, the cat guides you to an otherwise unseen opportunity; envision what you find and take +2 momentum.
          enhance_moves:
          - enhances:
            - starforged/moves/exploration/undertake_an_expedition
            roll_type: action_roll
            trigger:
              conditions:
              - text: When you [Undertake an Expedition](id:starforged/moves/exploration/undertake_an_expedition) through wilderness
        - text: |-
            When you [Endure Stress](id:starforged/moves/suffer/endure_stress) in the company of the jungle cat, or if you [Hearten](id:starforged/moves/recover/hearten) in their company, add +1. On a strong hit with a match, you find inspiration or solace; take +momentum equal to their health.
          enhance_moves:
          - enhances:
            - starforged/moves/suffer/endure_stress
            - starforged/moves/recover/hearten
            roll_type: action_roll
            trigger:
              conditions:
              - text: in the company of the jungle cat
        controls:
          health:
            <<: *BiologicalCompanionHealth
            max: 4
            value: 4
      monkey:
        name: Monkey
        type: asset
        options: *NameField
        _source:
          <<: *Source
        category: Companion
        abilities:
        - enabled: true
          text: &MonkeyBusinessText |-
            Your monkey companion finds its own trouble. Once per situation, when you score a miss, you may suffer the cost by envisioning the monkey causing mischief or getting into danger. If you do, roll +its health. On a strong hit, the monkey unwittingly turns the situation in your favor; take +2 momentum. On a weak hit, it provides a distraction or mild boon; take +1 momentum. On a miss, it faces its own cost or makes the situation worse.
          moves:
            monkey_business:
              type: move
              # TODO: also consider: "Monkeyshine", "Monkey Around", etc
              name: Monkey Business
              roll_type: action_roll
              _source: *Source
              trigger:
                text: Once per situation, when you score a miss, and you suffer the cost by envisioning the monkey causing mischief or getting into danger...
                conditions:
                - method: player_choice
                  roll_options:
                  - using: asset_control
                    control: health
              text: *MonkeyBusinessText
              outcomes:
                strong_hit:
                  text: On a __strong hit__, the monkey unwittingly turns the situation in your favor; take +2 momentum.
                weak_hit:
                  text: On a __weak hit__, the monkey provides a distraction or mild boon; take +1 momentum.
                miss:
                  text: On a __miss__, the monkey faces its own cost or makes the situation worse.
        - text: |-
            When you make a move by sending the monkey to complete a task involving theft, infiltration, or sabotage, roll +its health. On a hit, take +1 momentum.
          enhance_moves:
          - enhances: null
            roll_type: action_roll
            trigger:
              conditions:
              - text: When you make a move by sending the monkey to complete a task involving theft, infiltration, or sabotage
        - text: |-
            When you [Resupply](id:starforged/moves/recover/resupply) by asking the monkey to search or scavenge, add +1.
          enhance_moves:
          - enhances:
            - starforged/moves/recover/resupply
            roll_type: action_roll
            trigger:
              conditions:
              - text: When you [Resupply](id:starforged/moves/recover/resupply) by asking the monkey to search or scavenge
        controls:
          health:
            <<: *BiologicalCompanionHealth
            max: 3
            value: 3
      parrot:
        name: Parrot
        type: asset
        options: *NameField
        _source:
          <<: *Source
        category: Companion
        abilities:
        - enabled: true
          text: |-
            Your parrot companion offers random wisdom. When you seek inspiration, context, or direction, use your oracle dice to choose a table (1–25: [Action](id:sundered_isles/oracles/core/action), 26–50: [Theme](id:sundered_isles/oracles/core/theme), 51–75: [Descriptor](id:sundered_isles/oracles/core/descriptor), 76–100: [Focus](id:sundered_isles/oracles/core/focus)). Then, roll to learn what your parrot says. If you connect this prompt to your current situation for new insight, take +1 momentum.
        - text: |-
            Once per fight, when you score a miss, you may envision how the parrot appears on the scene to cause a timely distraction. If you do, make it a strong hit instead.
        - text: |-
            The parrot squawks a warning when danger is near. When you [Face Danger](id:starforged/moves/adventure/face_danger) to detect a threat, or if you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) against an ambush, add +its health.
          enhance_moves:
          - enhances:
            - starforged/moves/combat/enter_the_fray
            roll_type: action_roll
            trigger:
              conditions:
              - text: When you [Enter the Fray](id:starforged/moves/combat/enter_the_fray) against an ambush
          - enhances:
            - starforged/moves/*/face_danger
            roll_type: action_roll
            trigger:
              conditions:
              - text: When you [Face Danger](id:starforged/moves/adventure/face_danger) to detect a threat
        controls:
          health:
            <<: *BiologicalCompanionHealth
            max: 2
            value: 2
      rat:
        name: Rat
        type: asset
        options: *NameField
        _source:
          <<: *Source
        category: Companion
        abilities:
        - enabled: true
          text: |-
            Your rat companion shows the way. When you make a move to flee a danger aboard a ship or within a confined site, and let your rat take the lead, add +its health.
          enhance_moves:
            - enhances: null
              roll_type: action_roll
              trigger:
                conditions:
                  - text: When you make a move to flee a danger aboard a ship or within a confined site, and let your rat take the lead
        - text: |-
            When you make a move by setting loose the rat to cause a distraction or commotion among a crowd or in a public space, add +1 and take +1 momentum on a hit. On a strong hit with a match, it creates unexpected chaos; take +1 momentum more.
        - text: |-
            You may [Explore a Waypoint](id:starforged/moves/exploration/explore_a_waypoint) (even if not on an expedition) by sending the rat to search a promising confined area for something of interest or value. If you do, roll +its health. On a miss, its instincts have you forewarned; you may reroll one challenge die.
          enhance_moves:
          - enhances:
            - starforged/moves/exploration/explore_a_waypoint
            roll_type: action_roll
            trigger:
              conditions:
              - text: If you do
                roll_options:
                - using: asset_control
                  assets: null
                  control: health
        controls:
          health:
            <<: *BiologicalCompanionHealth
            max: 2
            value: 2
      kraken:
        name: The Kraken
        type: asset
        _source:
          <<: *Source
        category: Module
        requirement: While it is your companion, the Kraken cannot be harmed.
        abilities:
        - enabled: true
          text: |-
            When you summon the Kraken, fill one segment of a four-segment clock. The Kraken will heed a single command to destroy or overcome any foe or obstacle. If you are in a fight, [Take Decisive Action](id:starforged/moves/combat/take_decisive_action) with an automatic strong hit. When the clock is filled, [Ask the Oracle](id:starforged/oracles/moves/ask_the_oracle/fifty_fifty) (using the yes/no table) if the Kraken turns against you, making it 50/50. On a yes, discard this asset; the Kraken is now an epic foe. On a no, clear one segment of the clock.
          controls:
            clock:
              label: the Kraken turns against you
              field_type: clock
              max: 4
          enhance_moves:
          - enhances:
            - starforged/moves/combat/take_decisive_action
            roll_type: progress_roll
            trigger:
              conditions:
              - text: When you summon the Kraken in a sight
        - text: |-
            When you make a move using a threat to call the Kraken as leverage, add +2.
          enhance_moves:
            - roll_type: action_roll
              trigger:
                conditions:
                  - text: When you make a move using a threat to call the Kraken as leverage
        - text: |-
            One time only, when you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) (formidable or greater) in service to the Kraken and score a hit, choose one: clear all clock segments, or discard this asset and mark three boxes on your bonds legacy track.
          enhance_moves:
          - enhances:
            - starforged/moves/quest/fulfill_your_vow
            roll_type: progress_roll
            trigger:
              conditions:
              - text: One time only, when you [Fulfill Your Vow](id:starforged/moves/quest/fulfill_your_vow) (formidable or greater) in service to the Kraken
